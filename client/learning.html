<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å­¦ç¿’ã®é–“ - CSå­¦ç¿’ã‚¯ã‚¤ã‚ºãƒãƒˆãƒ«</title>
    <link rel="stylesheet" href="css/taisho.css">
    <script src="/socket.io/socket.io.js"></script>
    <script src="js/socket.js"></script>
    <script src="js/toast.js"></script>
</head>
<body>
    <!-- å››å­£ã®è£…é£¾è¦ç´  -->
    <div class="seasonal-decoration" id="seasonalDecoration"></div>

    <main class="washi-container wa-fade-in">
        <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
        <header class="wa-header">
            <h1 class="wa-title">å­¦ç¿’ã®é–“</h1>
            <p class="wa-subtitle">CSé›…å­¦ã®é–“ - å¤§æ­£ãƒ­ãƒãƒ³ã§å­¦ã¶ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ã‚µã‚¤ã‚¨ãƒ³ã‚¹</p>
            <div class="wa-divider"></div>
        </header>

        <!-- å½¹å‰²è¡¨ç¤ºã¨ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ -->
        <div class="wa-role-status" style="margin-bottom: 2rem;">
            <div class="wa-card">
                <div class="wa-card-content" style="display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <span class="wa-role-badge" id="roleDisplay">æœªè¨­å®š</span>
                        <span class="wa-player-name" id="playerNameDisplay">æœªè¨­å®š</span>
                    </div>
                    <div>
                        <span class="wa-room-info">ğŸ›ï¸ <span id="roomIdDisplay">æœªè¨­å®š</span></span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Guestå°‚ç”¨åŒæœŸçŠ¶æ…‹è¡¨ç¤º -->
        <div class="wa-guest-sync-panel" id="guestSyncPanel" style="display: none; margin-bottom: 2rem;">
            <div class="wa-card wa-sync-card">
                <div class="wa-card-content">
                    <div class="wa-sync-header">
                        <span class="wa-sync-icon">ğŸŒ¸</span>
                        <h3 class="wa-sync-title">ä¸»å‚¬è€…æ§˜ã¨åŒæœŸä¸­</h3>
                        <div class="wa-sync-status-dot" id="syncStatusDot"></div>
                    </div>
                    <p class="wa-sync-description">
                        ã‚ãªãŸã¯å‚åŠ è€…ã¨ã—ã¦ã€ä¸»å‚¬è€…æ§˜ã®æ“ä½œã«å„ªé›…ã«åŒæœŸã„ãŸã—ã¾ã™ã€‚<br>
                        ç¾ã—ã„å­¦ç¿’ã®èª¿ã¹ã‚’ãŠæ¥½ã—ã¿ãã ã•ã„ã€‚
                    </p>
                    <div class="wa-sync-info">
                        <span class="wa-sync-status-text" id="syncStatusText">æ¥ç¶šå¾…æ©Ÿä¸­</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ -->
        <nav class="wa-learning-nav">
            <!-- åˆ†é‡é¸æŠã‚¿ãƒ–ã¯ä¸è¦ã®ãŸã‚å‰Šé™¤ã€‚åˆæœŸé¸æŠã¯ numbers -->
            <div class="wa-nav-item active" data-category="numbers">
                <span class="wa-nav-icon">ğŸ”¢</span>
                <span class="wa-nav-text">æ•°å€¤ãƒ»ãƒ‡ãƒ¼ã‚¿</span>
            </div>
            <div class="wa-nav-item" data-category="hardware">
                <span class="wa-nav-icon">ğŸ’¾</span>
                <span class="wa-nav-text">ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢</span>
            </div>
            <div class="wa-nav-item" data-category="algorithms">
                <span class="wa-nav-icon">ğŸ”„</span>
                <span class="wa-nav-text">ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ </span>
            </div>
            <div class="wa-nav-item" data-category="web">
                <span class="wa-nav-icon">ğŸŒ</span>
                <span class="wa-nav-text">WebæŠ€è¡“</span>
            </div>
            <div class="wa-nav-item" data-category="network">
                <span class="wa-nav-icon">ğŸ”—</span>
                <span class="wa-nav-text">ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯</span>
            </div>
            <div class="wa-nav-item" data-category="security">
                <span class="wa-nav-icon">ğŸ”</span>
                <span class="wa-nav-text">ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£</span>
            </div>
        </nav>

        <!-- ãƒ‡ã‚¶ã‚¤ãƒ³C: å·»ç‰©ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ï¼ˆã‚«ãƒ†ã‚´ãƒªç›´ä¸‹ã®ç‰©èªé¸æŠUIï¼‰ -->
        <section class="wa-fade-in" id="story-selector" aria-label="ç‰©èªé¸æŠ">
            <style>
                /* å·»ç‰©ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ UIï¼ˆå­¦ç¿’ç”»é¢å†…ã«é™å®šé©ç”¨ï¼‰ */
                #story-selector .c-nav { display:flex; gap: var(--spacing-sm); flex-wrap: wrap; justify-content: center; margin-bottom: var(--spacing-lg); }
                #story-selector .c-scroll { background: var(--gradient-washi); border:2px solid var(--ai); border-radius: var(--border-radius-large); padding: var(--spacing-xl); position: relative; overflow: hidden; }
                #story-selector .c-scroll::before, #story-selector .c-scroll::after { content:''; position:absolute; left: 0; right: 0; height: 12px; background: repeating-linear-gradient(90deg, rgba(178,45,53,.15) 0 12px, transparent 12px 24px); }
                #story-selector .c-scroll::before { top:0; } #story-selector .c-scroll::after { bottom:0; }
                #story-selector .c-timeline { position: relative; margin: var(--spacing-xl) auto; max-width: 980px; }
                #story-selector .c-timeline::before { content:''; position:absolute; left: 20px; top:0; bottom:0; width: 4px; background: linear-gradient(180deg, var(--enjhi), var(--yamabuki)); border-radius: 2px; }
                #story-selector .c-node{ position:relative; display:grid; grid-template-columns: 60px 1fr; gap: var(--spacing-md); margin-bottom: var(--spacing-xl); align-items: start; }
                #story-selector .c-pin{ width: 18px; height: 18px; border-radius: 50%; background: var(--enjhi); border: 3px solid var(--washi); box-shadow: var(--shadow-soft); position: relative; left: 12px; top: 6px; }
                #story-selector .c-card{ background: var(--gradient-sakura); border:2px solid var(--enjhi); border-radius: var(--border-radius); padding: var(--spacing-lg); box-shadow: var(--shadow-soft); cursor: pointer; transition: transform .2s ease; }
                #story-selector .c-card:hover{ transform: translateY(-3px); }
                #story-selector .c-title{ font-family: var(--font-accent); color: var(--enjhi); font-weight: 800; }
                #story-selector .c-sub{ color: var(--ai); font-size: .95rem; margin-top: 6px; }
                #story-selector .c-meta{ display:flex; gap:6px; flex-wrap:wrap; margin-top: 8px; }
                #story-selector .c-chip{ background: rgba(22,94,131,.08); color: var(--ai); border:1px solid rgba(22,94,131,.2); border-radius: 999px; padding: 2px 8px; font-size: .8rem; }
                #story-selector .c-hidden{ display:none; }
            </style>

            <!-- ã‚«ãƒ†ã‚´ãƒªå†…ã‚¿ãƒ–ã¯ä¸è¦ã®ãŸã‚éè¡¨ç¤º -->

            <!-- å·»ç‰©ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³æœ¬ä½“ï¼ˆæœ€å¤§15è©±ï¼‰ -->
            <div class="c-scroll">
                <div id="tl-numbers" class="c-timeline"></div>
                <div id="tl-hardware" class="c-timeline c-hidden"></div>
                <div id="tl-algorithms" class="c-timeline c-hidden"></div>
                <div id="tl-web" class="c-timeline c-hidden"></div>
                <div id="tl-network" class="c-timeline c-hidden"></div>
                <div id="tl-security" class="c-timeline c-hidden"></div>
            </div>

            <script>
                // ãƒ«ãƒ¼ãƒ /å½¹å‰²æƒ…å ±ï¼ˆURLã‹ã‚‰å–å¾—ï¼‰
                const __params = new URLSearchParams(window.location.search);
                const roomId = __params.get('roomId') || '';
                const playerName = __params.get('playerName') || '';
                const userRole = __params.get('role') || 'guest';
                const initialCategoryParam = __params.get('category') || 'numbers';
                // å½¹å‰²ãƒ»ãƒ«ãƒ¼ãƒ è¡¨ç¤ºã®æ›´æ–°ã¨GueståŒæœŸãƒ‘ãƒãƒ«
                document.addEventListener('DOMContentLoaded', () => {
                    const rid = document.getElementById('roomIdDisplay');
                    const pname = document.getElementById('playerNameDisplay');
                    const rbadge = document.getElementById('roleDisplay');
                    if (rid && roomId) rid.textContent = roomId;
                    if (pname && playerName) pname.textContent = playerName;
                    if (rbadge) {
                        if (userRole === 'owner') {
                            rbadge.textContent = 'ğŸ‘‘ ä¸»å‚¬è€…';
                            rbadge.className = 'wa-role-badge owner';
                            const panel = document.getElementById('guestSyncPanel');
                            if (panel) panel.style.display = 'none';
                        } else {
                            rbadge.textContent = 'ğŸ‹ å‚åŠ è€…';
                            rbadge.className = 'wa-role-badge guest';
                            const panel = document.getElementById('guestSyncPanel');
                            if (panel) panel.style.display = 'block';
                        }
                    }
                });

                // å­£ç¯€è£…é£¾ï¼ˆæœ«å°¾ã‚¹ã‚¯ãƒªãƒ—ãƒˆå‰Šé™¤ã«ä¼´ã„ã“ã“ã§ç®¡ç†ï¼‰
                const seasons = ['spring', 'summer', 'autumn', 'winter'];
                let currentSeasonIndex = 0;
                function changeSeason() {
                    const seasonElement = document.getElementById('seasonalDecoration');
                    if (!seasonElement) return;
                    currentSeasonIndex = (currentSeasonIndex + 1) % seasons.length;
                    const season = seasons[currentSeasonIndex];
                    seasonElement.className = `seasonal-decoration season-${season}`;
                    generateSeasonalElements(season);
                }
                function generateSeasonalElements(season = 'spring') {
                    const container = document.getElementById('seasonalDecoration');
                    if (!container) return;
                    container.innerHTML = '';
                    const elementCount = 6;
                    for (let i = 0; i < elementCount; i++) {
                        const element = document.createElement('div');
                        switch (season) {
                            case 'spring':
                                element.className = 'sakura-petal';
                                element.style.left = Math.random() * 100 + '%';
                                element.style.animationDelay = Math.random() * 8 + 's';
                                element.style.animationDuration = (6 + Math.random() * 4) + 's';
                                break;
                            case 'summer':
                                element.className = 'summer-leaf';
                                element.style.cssText = `
                                    position: absolute; width: 8px; height: 8px; background: var(--tsuyu);
                                    border-radius: 50% 0 50% 0; left: ${Math.random() * 100}%;
                                    animation: summerSway ${4 + Math.random() * 3}s ease-in-out infinite;
                                    animation-delay: ${Math.random() * 4}s; opacity: 0.3;`;
                                break;
                            case 'autumn':
                                element.className = 'momiji-leaf';
                                element.style.left = Math.random() * 100 + '%';
                                element.style.animationDelay = Math.random() * 10 + 's';
                                element.style.animationDuration = (8 + Math.random() * 4) + 's';
                                break;
                            case 'winter':
                                element.className = 'snow-flake';
                                element.innerHTML = 'â„';
                                element.style.cssText = `
                                    position: absolute; color: var(--yuki);
                                    font-size: ${6 + Math.random() * 6}px; left: ${Math.random() * 100}%;
                                    animation: snowFall ${6 + Math.random() * 6}s linear infinite;
                                    animation-delay: ${Math.random() * 6}s; opacity: 0.6;`;
                                break;
                        }
                        container.appendChild(element);
                    }
                }
                document.addEventListener('DOMContentLoaded', () => {
                    generateSeasonalElements('spring');
                    setInterval(() => changeSeason(), 45000);
                });
                // ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³è¡¨ç¤ºç”¨ã®ãƒ©ãƒ™ãƒ«ï¼ˆãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‰
                const TL_DATA_FALLBACK = {
                    hardware: ['æ©Ÿæ¢°å¼è¨ˆç®—æ©Ÿã®æ‹','çœŸç©ºç®¡ã®ç¯ã‚Š','ãƒˆãƒ©ãƒ³ã‚¸ã‚¹ã‚¿ã®é¼“å‹•','ãƒ¡ãƒ¢ãƒªã®è¨˜æ†¶','ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã®ç´„æŸ','CPUã®ä¸‰æ‹å­','ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®èˆ','ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®å›ã','å‘½ä»¤ã‚»ãƒƒãƒˆã®è©©','ã‚¯ãƒ­ãƒƒã‚¯ã¨æ„›'],
                    algorithms: ['æ¢ç´¢ã¯å›ã‚’æ¢ã—ã¦','ã‚½ãƒ¼ãƒˆã®ãƒ€ãƒ³ã‚¹','è²ªæ¬²æ³•ã®èª˜æƒ‘','å‹•çš„è¨ˆç”»ã®æ‰‹ç´™','ã‚°ãƒ©ãƒ•ã®æ‹è·¯','æœ¨ã¨æ£®ã®ç‰©èª','å†å¸°ã®è¼ªèˆ'],
                    web: ['HTMLã®æ‹æ–‡','CSSã®å½©ã‚Š','JavaScriptã®å‘Šç™½','HTTPã®æ‰‹ç´™','Cookieã®æ€ã„å‡º','RESTã®èª“ã„','SPAã®ãã‚‰ã‚ã'],
                    network: ['TCPã®æ¡æ‰‹','UDPã®èµ°ã‚Šæ›¸ã','DNSã®åä»˜ã‘','ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã®æ—…','VPNã®å¯†ä¼š'],
                    security: ['æš—å·ã®æŒ‡è¼ª','å…¬é–‹éµã®ç´„æŸ','ãƒãƒƒã‚·ãƒ¥ã®å°å°','ã‚¼ãƒ­ãƒˆãƒ©ã‚¹ãƒˆã®èª“ã„','XSSã®å½±','CSRFã®ç½ ']
                };

                // ç‰©èªãƒ‡ãƒ¼ã‚¿ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆã‚«ãƒ†ã‚´ãƒª -> JSONï¼‰
                const STORIES = { numbers: null, hardware: null, algorithms: null, web: null, network: null, security: null };

                // ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³æç”»
                // items: [{ title, ep, icon, summary }]
                function renderTimeline(rootId, items, catKey){
                    const root = document.getElementById(rootId);
                    if (!root) return;
                    root.innerHTML = '';
                    items.forEach((it, i)=>{
                        const node = document.createElement('div');
                        node.className = 'c-node';
                        node.innerHTML = `
                            <div class='c-pin'></div>
                            <div class='c-card wa-pulse' data-story-title="${it.title}" data-cat="${catKey}" data-ep="${it.ep}">
                                <div class='c-title'>${(it.icon && !/^\d+$/.test(it.icon)) ? `<span style="margin-right:6px;">${it.icon}</span>` : ''}${it.title}</div>
                                <div class='c-sub'>${it.summary || 'çŸ­ã„ã‚ã‚‰ã™ã˜ãŒã“ã“ã«å…¥ã‚Šã¾ã™ã€‚'}</div>
                            </div>`;
                        root.appendChild(node);
                    });
                }

                // ã‚«ãƒ†ã‚´ãƒª: numbers ã‚’ manifest.json å„ªå…ˆã§èª­ã¿è¾¼ã¿ã€ç„¡ã‘ã‚Œã°å¾“æ¥JSONã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
                async function loadNumbers() {
                    const manifestUrl = '/data/stories/numbers/manifest.json';
                    try {
                        // manifest è©¦è¡Œ
                        let manifest = null;
                        try {
                            const r = await fetch(manifestUrl);
                            if (r.ok) {
                                manifest = await r.json();
                            }
                        } catch (_) {}

                        if (manifest && Array.isArray(manifest.chapters)) {
                            STORIES.numbers = manifest;
                            const items = (manifest.chapters || []).map(ch => ({
                                ep: ch.id,
                                title: `ç¬¬${ch.id}è©±ï¼š${ch.title}`,
                                icon: ch.icon || '',
                                summary: ch.summary || ''
                            }));
                            renderTimeline('tl-numbers', items, 'numbers');
                            return;
                        }

                        // æ—§JSONãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
                        const res = await fetch('/data/stories/01_numbers.json');
                        if (!res.ok) throw new Error('numbers JSON not found');
                        const json = await res.json();
                        STORIES.numbers = json;
                        const items = (json.chapters || []).map(ch => ({
                            ep: ch.id,
                            title: `ç¬¬${ch.id}è©±ï¼š${ch.title}`,
                            icon: ch.icon || '',
                            summary: ch.summary || ''
                        }));
                        renderTimeline('tl-numbers', items, 'numbers');
                    } catch (e) {
                        // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼ˆç°¡æ˜“3è©±ï¼‰
                        const fallback = [
                            { ep: 1, title: 'ç¬¬1è©±ï¼šäºŒé€²æ³•ã®æ‹æ–‡', icon: '01', summary: '' },
                            { ep: 2, title: 'ç¬¬2è©±ï¼šãƒ‡ãƒ¼ã‚¿å‹ã®æ‹æ„›é–¢ä¿‚', icon: '02', summary: '' },
                            { ep: 3, title: 'ç¬¬3è©±ï¼šé€²æ•°å¤‰æ›ã®æ„›', icon: '03', summary: '' }
                        ];
                        renderTimeline('tl-numbers', fallback, 'numbers');
                    }
                }

                // ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¯ manifest å„ªå…ˆã§èª­ã¿è¾¼ã‚€
                async function loadAlgorithms() {
                    const manifestUrl = '/data/stories/algorithms/manifest.json';
                    try {
                        let manifest = null;
                        try {
                            const r = await fetch(manifestUrl);
                            if (r.ok) manifest = await r.json();
                        } catch (_) {}

                        if (manifest && Array.isArray(manifest.chapters)) {
                            STORIES.algorithms = manifest;
                            const items = (manifest.chapters || []).map(ch => ({
                                ep: ch.id,
                                title: `ç¬¬${ch.id}è©±ï¼š${ch.title}`,
                                icon: ch.icon || '',
                                summary: ch.summary || ''
                            }));
                            renderTimeline('tl-algorithms', items, 'algorithms');
                            return;
                        }
                        await loadCategory('algorithms', '/data/stories/03_algorithms.json');
                    } catch (e) {
                        const items = (TL_DATA_FALLBACK['algorithms'] || []).map((title, idx) => ({ ep: idx+1, title, icon: '', summary: '' }));
                        renderTimeline('tl-algorithms', items, 'algorithms');
                    }
                }

                // Webã¯ manifest å„ªå…ˆã§èª­ã¿è¾¼ã‚€
                async function loadWeb() {
                    const manifestUrl = '/data/stories/web/manifest.json';
                    try {
                        let manifest = null;
                        try {
                            const r = await fetch(manifestUrl);
                            if (r.ok) manifest = await r.json();
                        } catch (_) {}

                        if (manifest && Array.isArray(manifest.chapters)) {
                            STORIES.web = manifest;
                            const items = (manifest.chapters || []).map(ch => ({
                                ep: ch.id,
                                title: `ç¬¬${ch.id}è©±ï¼š${ch.title}`,
                                icon: ch.icon || '',
                                summary: ch.summary || ''
                            }));
                            renderTimeline('tl-web', items, 'web');
                            return;
                        }
                        await loadCategory('web', '/data/stories/04_web.json');
                    } catch (e) {
                        const items = (TL_DATA_FALLBACK['web'] || []).map((title, idx) => ({ ep: idx+1, title, icon: '', summary: '' }));
                        renderTimeline('tl-web', items, 'web');
                    }
                }

                // ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã¯ manifest å„ªå…ˆã§èª­ã¿è¾¼ã‚€
                async function loadNetwork() {
                    const manifestUrl = '/data/stories/network/manifest.json';
                    try {
                        let manifest = null;
                        try {
                            const r = await fetch(manifestUrl);
                            if (r.ok) manifest = await r.json();
                        } catch (_) {}

                        if (manifest && Array.isArray(manifest.chapters)) {
                            STORIES.network = manifest;
                            const items = (manifest.chapters || []).map(ch => ({
                                ep: ch.id,
                                title: `ç¬¬${ch.id}è©±ï¼š${ch.title}`,
                                icon: ch.icon || '',
                                summary: ch.summary || ''
                            }));
                            renderTimeline('tl-network', items, 'network');
                            return;
                        }
                        await loadCategory('network', '/data/stories/05_network.json');
                    } catch (e) {
                        const items = (TL_DATA_FALLBACK['network'] || []).map((title, idx) => ({ ep: idx+1, title, icon: '', summary: '' }));
                        renderTimeline('tl-network', items, 'network');
                    }
                }

                // ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¯ manifest å„ªå…ˆã§èª­ã¿è¾¼ã‚€
                async function loadSecurity() {
                    const manifestUrl = '/data/stories/security/manifest.json';
                    try {
                        let manifest = null;
                        try {
                            const r = await fetch(manifestUrl);
                            if (r.ok) manifest = await r.json();
                        } catch (_) {}

                        if (manifest && Array.isArray(manifest.chapters)) {
                            STORIES.security = manifest;
                            const items = (manifest.chapters || []).map(ch => ({
                                ep: ch.id,
                                title: `ç¬¬${ch.id}è©±ï¼š${ch.title}`,
                                icon: ch.icon || '',
                                summary: ch.summary || ''
                            }));
                            renderTimeline('tl-security', items, 'security');
                            return;
                        }
                        await loadCategory('security', '/data/stories/06_security.json');
                    } catch (e) {
                        const items = (TL_DATA_FALLBACK['security'] || []).map((title, idx) => ({ ep: idx+1, title, icon: '', summary: '' }));
                        renderTimeline('tl-security', items, 'security');
                    }
                }

                // ä»–ã‚«ãƒ†ã‚´ãƒªã®JSONã‚’èª­ã¿è¾¼ã¿æç”»
                async function loadCategory(cat, path) {
                    try {
                        const res = await fetch(path);
                        if (!res.ok) throw new Error('not found: '+path);
                        const json = await res.json();
                        STORIES[cat] = json;
                        const items = (json.chapters || []).map(ch => ({
                            ep: ch.id,
                            title: `ç¬¬${ch.id}è©±ï¼š${ch.title}`,
                            icon: ch.icon || '',
                            summary: ch.summary || ''
                        }));
                        renderTimeline('tl-'+cat, items, cat);
                    } catch (e) {
                        const items = (TL_DATA_FALLBACK[cat] || []).map((title, idx) => ({ ep: idx+1, title, icon: '', summary: '' }));
                        renderTimeline('tl-'+cat, items, cat);
                    }
                }

                // ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã¯ manifest å„ªå…ˆã§èª­ã¿è¾¼ã‚€
                async function loadHardware() {
                    const manifestUrl = '/data/stories/hardware/manifest.json';
                    try {
                        let manifest = null;
                        try {
                            const r = await fetch(manifestUrl);
                            if (r.ok) {
                                manifest = await r.json();
                            }
                        } catch (_) {}

                        if (manifest && Array.isArray(manifest.chapters)) {
                            STORIES.hardware = manifest;
                            const items = (manifest.chapters || []).map(ch => ({
                                ep: ch.id,
                                title: `ç¬¬${ch.id}è©±ï¼š${ch.title}`,
                                icon: ch.icon || '',
                                summary: ch.summary || ''
                            }));
                            renderTimeline('tl-hardware', items, 'hardware');
                            return;
                        }

                        // æ—§JSONãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
                        await loadCategory('hardware', '/data/stories/02_hardware.json');
                    } catch (e) {
                        const items = (TL_DATA_FALLBACK['hardware'] || []).map((title, idx) => ({ ep: idx+1, title, icon: '', summary: '' }));
                        renderTimeline('tl-hardware', items, 'hardware');
                    }
                }

                

                // ã‚«ãƒ†ã‚´ãƒªå†…ã‚¿ãƒ–ã¯æ’¤å»ƒï¼ˆãƒˆãƒƒãƒ—ãƒŠãƒ“ã¨åŒæœŸè¡¨ç¤ºã«ä¸€æœ¬åŒ–ï¼‰

                // ç‰©èªé¸æŠæ™‚ã®é·ç§»ï¼ˆæ—¢å­˜ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¸ç§»å‹•ï¼‰
                document.getElementById('story-selector').addEventListener('click', (e)=>{
                    const card = e.target.closest('.c-card');
                    if (!card) return;
                    const cat = card.getAttribute('data-cat');
                    const title = card.getAttribute('data-story-title');
                    const ep = parseInt(card.getAttribute('data-ep'), 10) || 1;

                    // 2ãƒšãƒ¼ã‚¸æ§‹æˆã«å¤‰æ›´: ç‰©èªæœ¬æ–‡ãƒšãƒ¼ã‚¸ã¸é·ç§»
                    // ã‚¯ã‚¨ãƒª: category, chapter ã‚’ä»˜ä¸
                    const params = new URLSearchParams({ category: cat, chapter: String(ep) });
                    try {
                        if (typeof roomId !== 'undefined' && roomId) params.set('roomId', roomId);
                        if (typeof playerName !== 'undefined' && playerName) params.set('playerName', playerName);
                        if (typeof userRole !== 'undefined' && userRole) params.set('role', userRole);
                        // Ownerã®å ´åˆã¯å…ˆã«åŒæœŸã‚¤ãƒ™ãƒ³ãƒˆã‚’é€å‡ºï¼ˆGuestã®è¿½å¾“é…å»¶ã‚’æœ€å°åŒ–ï¼‰
                        if (userRole === 'owner' && roomId) {
                            try {
                                const sock = window.__learningSocket || (window.__learningSocket = io());
                                sock.emit('learning_story_change', { roomId, category: cat, chapterId: ep });
                            } catch (e) {}
                        }
                        if (typeof showSakuraToast === 'function') {
                            showSakuraToast(`ã€Œç¬¬${ep}è©±ã€ã¸ç§»å‹•ã—ã¾ã™â€¦`, 900, 'ç‰©èªã¸ç§»å‹•', 'ğŸ“–');
                        }
                    } catch (e) { /* no-op */ }
                    setTimeout(() => { window.location.href = `learning-story.html?${params.toString()}`; }, 900);
                });

                // GueståŒæœŸ: OwnerãŒå¤‰æ›´ã—ãŸã‚‰åæ˜ 
                (function setupGuestSync(){
                    try {
                        const sock = window.__learningSocket || (window.__learningSocket = io());

                        // ãƒ«ãƒ¼ãƒ å‚åŠ ï¼ˆOwner/Guestã¨ã‚‚ã«å‚åŠ ã•ã›ã€ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆ/é€šçŸ¥ã‚’å—ã‘å–ã‚‹ï¼‰
                        if (roomId) {
                            sock.emit('join_room', { roomId, playerName, role: userRole, mode: 'learning' });
                        }

                        // Guest: Ownerã®å¤‰æ›´ã‚’åæ˜ ï¼ˆç‰©èªãŒé¸ã°ã‚ŒãŸã‚‰æœ¬æ–‡ãƒšãƒ¼ã‚¸ã¸ï¼‰
                        sock.on('learning_story_changed', ({ category, chapterId }) => {
                            try {
                                const params = new URLSearchParams({ category, chapter: String(chapterId || 1) });
                                if (roomId) params.set('roomId', roomId);
                                if (playerName) params.set('playerName', playerName);
                                if (userRole) params.set('role', userRole);
                                // Guestå´: æ¡œãƒˆãƒ¼ã‚¹ãƒˆã‚’è¡¨ç¤ºã—ã¦ã‹ã‚‰é·ç§»
                                if (typeof showSakuraToast === 'function') {
                                    const chLabel = chapterId ? `ç¬¬${chapterId}è©±` : '';
                                    showSakuraToast(`ä¸»å‚¬è€…ãŒã€Œ${chLabel}ã€ã‚’é–‹ãã¾ã—ãŸã€‚è¿½å¾“ã—ã¦ã„ã¾ã™â€¦`, 1000, 'ç‰©èªã¸ç§»å‹•', 'ğŸŒ¸');
                                }
                                setTimeout(() => { window.location.href = `learning-story.html?${params.toString()}`; }, 1000);
                                return;
                            } catch (e) { /* ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯: æ—§å†…è¡¨ç¤º */ }

                            // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼ˆä¸‡ä¸€é·ç§»ã§ããªã„å ´åˆï¼‰
                            const subId = category;
                            document.querySelectorAll('.wa-content-section').forEach(s=>s.classList.remove('active'));
                            const el = document.getElementById(subId);
                            if (el) el.classList.add('active');
                        });

                        // Guest: ã‚«ãƒ†ã‚´ãƒªå¤‰æ›´ã®åæ˜ ï¼ˆã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã¨ãƒŠãƒ“ã‚’åŒæœŸè¡¨ç¤ºï¼‰
                        sock.on('learning_category_changed', ({ category }) => {
                            if (!category) return;
                            setActiveCategoryUI(category);
                            if (typeof showSakuraToast === 'function') {
                                const map = {numbers:'æ•°å€¤ãƒ»ãƒ‡ãƒ¼ã‚¿',hardware:'ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢',algorithms:'ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ',web:'WebæŠ€è¡“',network:'ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯',security:'ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£'};
                                const label = map[category] || category;
                                showSakuraToast(`ä¸»å‚¬è€…ãŒã€Œ${label}ã€ã‚’è¡¨ç¤ºã—ã¾ã—ãŸã€‚`, 900, 'è¡¨ç¤ºåˆ‡æ›¿', 'ğŸŒ¸');
                            }
                        });

                        // Guest: å‚åŠ æ™‚ã®ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã‚’åæ˜ 
                        sock.on('learning_story_snapshot', ({ currentCategory, selectedStory }) => {
                            // ç‰©èªãŒé¸æŠæ¸ˆã¿ãªã‚‰æœ¬æ–‡ãƒšãƒ¼ã‚¸ã¸åŒæœŸé·ç§»
                            const chId = selectedStory?.[currentCategory];
                            if (currentCategory && currentCategory !== 'menu' && chId) {
                                try {
                                    const params = new URLSearchParams({ category: currentCategory, chapter: String(chId) });
                                    if (roomId) params.set('roomId', roomId);
                                    if (playerName) params.set('playerName', playerName);
                                    if (userRole) params.set('role', userRole);
                                    window.location.href = `learning-story.html?${params.toString()}`;
                                    return;
                                } catch (e) { /* no-op */ }
                            }

                            // æœªé¸æŠæ™‚ã¯ã‚«ãƒ†ã‚´ãƒªã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã ã‘åŒæœŸè¡¨ç¤º
                            if (!currentCategory || currentCategory === 'menu') currentCategory = 'numbers';
                            setActiveCategoryUI(currentCategory);
                        });
                    } catch (e) { /* ç„¡è¦– */ }
                })();

                // ã‚«ãƒ†ã‚´ãƒªé¸æŠUIåˆ¶å¾¡ï¼šãƒŠãƒ“ã®activeã¨ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã®è¡¨ç¤ºåˆ‡æ›¿
                function setActiveCategoryUI(cat) {
                    // ãƒŠãƒ“ã®activeåˆ‡æ›¿
                    document.querySelectorAll('.wa-learning-nav .wa-nav-item').forEach(el => {
                        el.classList.toggle('active', el.getAttribute('data-category') === cat);
                    });
                    // ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³è¡¨ç¤ºåˆ‡æ›¿
                    document.querySelectorAll('#story-selector .c-timeline').forEach(el => el.classList.add('c-hidden'));
                    const tl = document.getElementById('tl-' + cat) || document.getElementById('tl-numbers');
                    if (tl) tl.classList.remove('c-hidden');
                }

                // Owneræ“ä½œ: ã‚«ãƒ†ã‚´ãƒªé¸æŠæ™‚ã«åŒæœŸé€å‡º
                function selectCategory(cat) {
                    setActiveCategoryUI(cat);
                    try {
                        if (userRole === 'owner' && roomId) {
                            const sock = window.__learningSocket || (window.__learningSocket = io());
                            sock.emit('learning_category_change', { roomId, category: cat });
                        }
                    } catch (e) { /* no-op */ }
                }

                // ãƒŠãƒ“ã‚¯ãƒªãƒƒã‚¯è¨­å®šï¼ˆGuestã¯æ“ä½œä¸å¯ï¼ç„¡è¦–ã€Ownerã®ã¿åæ˜ ï¼‰
                document.querySelectorAll('.wa-learning-nav .wa-nav-item').forEach(item => {
                    item.addEventListener('click', () => {
                        const cat = item.getAttribute('data-category');
                        if (userRole !== 'owner') return; // Guestã¯æ“ä½œã—ãªã„
                        selectCategory(cat);
                        if (typeof showSakuraToast === 'function') {
                            const map = {numbers:'æ•°å€¤ãƒ»ãƒ‡ãƒ¼ã‚¿',hardware:'ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢',algorithms:'ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ',web:'WebæŠ€è¡“',network:'ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯',security:'ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£'};
                            const label = map[cat] || cat;
                            showSakuraToast(`ã€Œ${label}ã€ã‚’è¡¨ç¤ºã—ã¾ã™â€¦`, 800, 'è¡¨ç¤ºåˆ‡æ›¿', 'ğŸŒ¸');
                        }
                    });
                });

                // åˆæœŸãƒ­ãƒ¼ãƒ‰
                (async function initStorySelector(){
                    await Promise.all([
                        loadNumbers(),
                        loadHardware(),
                        loadAlgorithms(),
                        loadWeb(),
                        loadNetwork(),
                        loadSecurity()
                    ]);
                    // åˆæœŸã‚«ãƒ†ã‚´ãƒªè¡¨ç¤ºã®åæ˜ ï¼ˆURLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å„ªå…ˆï¼‰
                    setActiveCategoryUI(initialCategoryParam);
                    // Ownerãªã‚‰åˆæœŸã‚«ãƒ†ã‚´ãƒªã‚’ã‚µãƒ¼ãƒãƒ¼ã¸åŒæœŸï¼ˆã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆæ•´åˆï¼‰
                    try {
                        if (userRole === 'owner' && roomId) {
                            const sock = window.__learningSocket || (window.__learningSocket = io());
                            sock.emit('learning_category_change', { roomId, category: initialCategoryParam });
                        }
                    } catch (e) { /* no-op */ }
                })();
            </script>
        </section>

        <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ï¼ˆæ—§ãƒ»å†…è”µæœ¬æ–‡ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã€‚2ãƒšãƒ¼ã‚¸åŒ–ã«ä¼´ã„ç„¡åŠ¹åŒ–ï¼‰ -->
        <!--
        <section class="wa-learning-main">

            <!-- å„åˆ†é‡ã®ã‚¹ãƒˆãƒ¼ãƒªãƒ¼è¡¨ç¤º -->
            <div class="wa-content-section" id="numbers">
                <div class="wa-story-content">
                    <div class="wa-story-header">
                        <h2 class="wa-story-title">ğŸ”¢ æ•°å€¤ã¨ãƒ‡ãƒ¼ã‚¿ã®åŸºç¤</h2>
                        <div class="wa-story-subtitle">ç¬¬ä¸€ç« ï¼šäºŒé€²æ³•ã®æ‹æ–‡</div>
                        <div class="wa-divider"></div>
                    </div>

                    <div class="wa-story-layout">
                        <div class="wa-story-main">
                            <div class="wa-story-body">
                                <div class="wa-story-scroll" id="numbersStoryScroll">
                                    <div class="wa-story-section">
                                        <div class="wa-typewriter-text" id="numbersStory">
                                            æˆ¦å ´ã®ç‰‡éš…ã§ã€é€šä¿¡å…µã®é’å¹´ãƒ»æ‹“æµ·ã¯æ‹äººãƒ»æ¡œã¸ã®æ‰‹ç´™ã‚’ç¶´ã£ã¦ã„ãŸã€‚<br><br>

                                            ã€Œæ„›ã—ã„æ¡œã¸ã€ã“ã®æˆ¦ã„ãŒçµ‚ã‚ã£ãŸã‚‰å¿…ãšå›ã®ã‚‚ã¨ã¸å¸°ã‚‹ã€<br><br>

                                            ã—ã‹ã—æ•µã«è§£èª­ã•ã‚Œã¬ã‚ˆã†ã€å½¼ã¯æ•°å­¦ã§å­¦ã‚“ã äºŒé€²æ³•ã§æš—å·åŒ–ã™ã‚‹ã“ã¨ã«ã—ãŸã€‚<br>
                                            01001001 00100000 01001100 01101111 01110110 01100101 00100000 01011001 01101111 01110101<br>
                                            (I Love You)<br><br>

                                            æ¡œã‚‚ã¾ãŸã€ã“ã®æš—å·ã‚’è§£èª­ã§ãã‚‹å”¯ä¸€ã®äººã€‚äºŒäººã®æ„›ã¯0ã¨1ã§çµã°ã‚Œã¦ã„ãŸã€‚<br><br>

                                            ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã‚‚ã¾ãŸã€ã™ã¹ã¦ã‚’0ã¨1ã§è¡¨ç¾ã™ã‚‹ã€‚ã“ã®æœ€å°å˜ä½ã‚’ãƒ“ãƒƒãƒˆ(bit)ã¨å‘¼ã³ã€8ãƒ“ãƒƒãƒˆã§1ãƒã‚¤ãƒˆ(byte)ã¨ãªã‚‹ã€‚<br><br>

                                            æ‹“æµ·ã®æ‹æ–‡ã€ŒI Love Youã€ã¯ã€<br>
                                            - I = 01001001 (8ãƒ“ãƒƒãƒˆ = 1ãƒã‚¤ãƒˆ)<br>
                                            - (ã‚¹ãƒšãƒ¼ã‚¹) = 00100000<br>
                                            - L = 01001100<br>
                                            - o = 01101111<br>
                                            - v = 01110110<br>
                                            - e = 01100101<br><br>

                                            ã“ã®ã‚ˆã†ã«ã€æ–‡å­—ã¯æ•°å€¤ã«å¯¾å¿œã—ã€ãã®æ•°å€¤ãŒäºŒé€²æ³•ã§è¡¨ç¾ã•ã‚Œã‚‹ã€‚<br>
                                            ã“ã‚ŒãŒæ–‡å­—ã‚³ãƒ¼ãƒ‰(ASCII)ã®ä»•çµ„ã¿ã§ã‚ã‚‹ã€‚<br><br>

                                            <div class="wa-poem-section">
                                                <div class="wa-poem-title">ğŸ“œ æ‹ã®çŸ­æ­Œ</div>
                                                <div class="wa-poem-text">
                                                    é›¶ã¨ä¸€<br>
                                                    æ‹æ–‡ç¶´ã‚‹ã€€å…µå£«ã‹ãª<br>
                                                    ãƒã‚¤ãƒˆã«è¾¼ã‚ã—<br>
                                                    æ°¸é ã®æ„›<br>
                                                </div>
                                            </div><br>

                                            æˆ¦äº‰ãŒçµ‚ã‚ã‚Šã€äºŒäººã¯å†ä¼šã—ãŸã€‚æ¡œã¯æ‹“æµ·ã«è¨€ã£ãŸã€‚<br>
                                            ã€Œã‚ãªãŸã®æš—å·ã€å…¨éƒ¨è§£èª­ã—ãŸã®ã‚ˆã€<br><br>

                                            ãã—ã¦æ¡œã¯å¾®ç¬‘ã‚“ã§ç¶šã‘ãŸã€‚<br>
                                            ã€Œ01001001 00100000 01001100 01101111 01110110 01100101 00100000 01011001 01101111 01110101 00100000 01010100 01101111 01101111ã€<br>
                                            (I Love You Too)<br><br>

                                            äºŒäººã®æ„›ã¯ã€ãƒ‡ã‚¸ã‚¿ãƒ«æ™‚ä»£ã®ä»Šã‚‚ãªãŠã€0ã¨1ã®ä¸­ã«æ¯ã¥ã„ã¦ã„ã‚‹ã€‚
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="wa-story-sidebar">
                            <div class="wa-key-concepts">
                                <h3 class="wa-concepts-title">ğŸ”‘ é‡è¦æ¦‚å¿µ</h3>
                                <div class="wa-concept-list">
                                    <div class="wa-concept-item">
                                        <strong>ãƒ“ãƒƒãƒˆ(bit)</strong>: 0ã¾ãŸã¯1ã®1æ¡ã®æƒ…å ±å˜ä½
                                    </div>
                                    <div class="wa-concept-item">
                                        <strong>ãƒã‚¤ãƒˆ(byte)</strong>: 8ãƒ“ãƒƒãƒˆã§æ§‹æˆã•ã‚Œã‚‹æƒ…å ±å˜ä½
                                    </div>
                                    <div class="wa-concept-item">
                                        <strong>äºŒé€²æ³•</strong>: 0ã¨1ã ã‘ã§æ•°ã‚’è¡¨ç¾ã™ã‚‹æ–¹æ³•
                                    </div>
                                    <div class="wa-concept-item">
                                        <strong>ASCII</strong>: æ–‡å­—ã¨æ•°å€¤ã‚’å¯¾å¿œã¥ã‘ã‚‹æ–‡å­—ã‚³ãƒ¼ãƒ‰
                                    </div>
                                    <div class="wa-concept-item">
                                        <strong>æ–‡å­—ã‚³ãƒ¼ãƒ‰</strong>: æ–‡å­—ã‚’ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãŒç†è§£ã§ãã‚‹æ•°å€¤ã«å¤‰æ›ã™ã‚‹è¦å‰‡
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢åˆ†é‡ -->
            <div class="wa-content-section" id="hardware">
                <div class="wa-story-content">
                    <div class="wa-story-header">
                        <h2 class="wa-story-title">ğŸ’¾ ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢</h2>
                        <div class="wa-story-subtitle">ç¬¬äºŒç« ï¼šæ©Ÿæ¢°å¼è¨ˆç®—æ©Ÿã®æ‹</div>
                        <div class="wa-divider"></div>
                    </div>

                    <div class="wa-story-layout">
                        <div class="wa-story-main">
                            <div class="wa-story-body">
                                <div class="wa-story-scroll" id="hardwareStoryScroll">
                                    <div class="wa-story-section">
                                        <div class="wa-typewriter-text" id="hardwareStory">
                                            1943å¹´ã€æˆ¦æ™‚ä¸‹ã®ç ”ç©¶æ‰€ã€‚æ•°å­¦è€…ã®ç¾å¥ˆå­ã¯ã€å·¨å¤§ãªæ©Ÿæ¢°å¼è¨ˆç®—æ©Ÿã¨å‘ãåˆã£ã¦ã„ãŸã€‚<br><br>

                                            ã“ã®è¨ˆç®—æ©Ÿã¯ã€å¼¾é“è¨ˆç®—ã®ãŸã‚ã«ä½œã‚‰ã‚ŒãŸã‚‚ã®ã€‚çœŸç©ºç®¡ãŒæ•°åƒæœ¬ã‚‚ä¸¦ã³ã€éƒ¨å±‹å…¨ä½“ã‚’å æ‹ ã—ã¦ã„ãŸã€‚<br><br>

                                            ç¾å¥ˆå­ã®æ‹äººãƒ»æ­£å¤ªéƒã¯å‰ç·šã«ã„ã‚‹ã€‚å½¼å¥³ã¯æ¯æ—¥ã€ã“ã®è¨ˆç®—æ©Ÿã§æ­£å¤ªéƒã®éƒ¨éšŠã®ç”Ÿå­˜ç¢ºç‡ã‚’è¨ˆç®—ã—ç¶šã‘ãŸã€‚<br><br>

                                            æ©Ÿæ¢°å¼è¨ˆç®—æ©Ÿã®å¿ƒè‡“éƒ¨ã¯æ¼”ç®—è£…ç½®ã€‚ç¾ä»£ã§ã„ã†CPU(Central Processing Unit)ã®åŸå‹ã ã£ãŸã€‚<br>
                                            ã“ã®è£…ç½®ã¯ã€ã€Œãƒ•ã‚§ãƒƒãƒâ†’ãƒ‡ã‚³ãƒ¼ãƒ‰â†’å®Ÿè¡Œã€ã¨ã„ã†åŸºæœ¬ã‚µã‚¤ã‚¯ãƒ«ã§å‹•ä½œã—ã¦ã„ãŸã€‚<br><br>

                                            <div class="diagram-section">
                                                <strong>CPUã®åŸºæœ¬ã‚µã‚¤ã‚¯ãƒ«:</strong><br>
                                                1. ãƒ•ã‚§ãƒƒãƒ(Fetch): å‘½ä»¤ã‚’ãƒ¡ãƒ¢ãƒªã‹ã‚‰å–å¾—<br>
                                                2. ãƒ‡ã‚³ãƒ¼ãƒ‰(Decode): å‘½ä»¤ã®æ„å‘³ã‚’è§£èª­<br>
                                                3. å®Ÿè¡Œ(Execute): å‘½ä»¤ã‚’å®Ÿéš›ã«å®Ÿè¡Œ<br>
                                            </div><br>

                                            è¨ˆç®—æ©Ÿã«ã¯è¨˜æ†¶è£…ç½®ã‚‚å¿…è¦ã ã£ãŸã€‚å½“æ™‚ã¯ç£æ°—ãƒ‰ãƒ©ãƒ ãŒä¸»æµã§ã€ç¾ä»£ã®ãƒãƒ¼ãƒ‰ãƒ‡ã‚£ã‚¹ã‚¯ã®ç¥–å…ˆã ã£ãŸã€‚<br>
                                            ä½œæ¥­ç”¨ã®é«˜é€Ÿè¨˜æ†¶è£…ç½®ã¯æ°´éŠ€é…å»¶ç·šãƒ¡ãƒ¢ãƒªã€‚ã“ã‚ŒãŒç¾ä»£ã®RAM(Random Access Memory)ã®å‰èº«ã§ã‚ã‚‹ã€‚<br><br>

                                            ã‚ã‚‹æ—¥ã€æ­£å¤ªéƒã‹ã‚‰æ‰‹ç´™ãŒå±Šã„ãŸã€‚<br>
                                            ã€Œå›ã®è¨ˆç®—ã®ãŠã‹ã’ã§ã€åƒ•ãŸã¡ã¯çš„ç¢ºãªä½œæˆ¦ã‚’ç«‹ã¦ã‚‰ã‚Œã¦ã„ã‚‹ã€‚å›ã¯åƒ•ãŸã¡ã®é ­è„³ã ã€<br><br>

                                            <div class="wa-poem-section">
                                                <div class="wa-poem-title">ğŸ“œ æ©Ÿæ¢°ã®çŸ­æ­Œ</div>
                                                <div class="wa-poem-text">
                                                    çœŸç©ºç®¡<br>
                                                    å…‰ã‚Šã¦å·¡ã‚‹ã€€æƒ³ã„ã‹ãª<br>
                                                    CPUã®èƒ¸ã«<br>
                                                    æ‹ã‚’å‡¦ç†ã›ã‚“<br>
                                                </div>
                                            </div><br>

                                            æˆ¦äº‰ãŒçµ‚ã‚ã‚Šã€ç¾å¥ˆå­ã¨æ­£å¤ªéƒã¯çµå©šã—ãŸã€‚<br>
                                            äºŒäººã®çµå©šå¼ã®æ—¥ã€ç¾å¥ˆå­ã¯è¨€ã£ãŸã€‚<br><br>

                                            ã€Œç§ãŸã¡ã®æ„›ã‚‚ã€ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã¨åŒã˜ã€‚<br>
                                            å…¥åŠ›ã¯ã€å‡ºä¼šã„ã€ã€å‡¦ç†ã¯ã€æ€ã„ã‚„ã‚Šã€ã€å‡ºåŠ›ã¯ã€å¹¸ã›ã€ã‚ˆã€<br><br>

                                            ãã—ã¦ç¾ä»£ã€ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã®ä¸­ã«ã¯æ•°åå„„å€‹ã®ãƒˆãƒ©ãƒ³ã‚¸ã‚¹ã‚¿ãŒåƒã„ã¦ã„ã‚‹ã€‚<br>
                                            ç¾å¥ˆå­ã®æ©Ÿæ¢°å¼è¨ˆç®—æ©Ÿã‹ã‚‰å§‹ã¾ã£ãŸæŠ€è¡“é©æ–°ã¯ã€ä»Šã‚‚ç§ãŸã¡ã®æ„›ã‚’çµã³ç¶šã‘ã¦ã„ã‚‹ã€‚
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="wa-story-sidebar">
                            <div class="wa-key-concepts">
                                <h3 class="wa-concepts-title">ğŸ”‘ é‡è¦æ¦‚å¿µ</h3>
                                <div class="wa-concept-list">
                                    <div class="wa-concept-item">
                                        <strong>CPU</strong>: ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã®ä¸­å¤®å‡¦ç†è£…ç½®ã€è¨ˆç®—ã¨åˆ¶å¾¡ã‚’è¡Œã†
                                    </div>
                                    <div class="wa-concept-item">
                                        <strong>ãƒ•ã‚§ãƒƒãƒãƒ»ãƒ‡ã‚³ãƒ¼ãƒ‰ãƒ»å®Ÿè¡Œã‚µã‚¤ã‚¯ãƒ«</strong>: CPUã®åŸºæœ¬çš„ãªå‹•ä½œãƒ‘ã‚¿ãƒ¼ãƒ³
                                    </div>
                                    <div class="wa-concept-item">
                                        <strong>RAM</strong>: ãƒ©ãƒ³ãƒ€ãƒ ã‚¢ã‚¯ã‚»ã‚¹ãƒ¡ãƒ¢ãƒªã€ä¸€æ™‚çš„ãªãƒ‡ãƒ¼ã‚¿ä¿å­˜
                                    </div>
                                    <div class="wa-concept-item">
                                        <strong>ãƒãƒ¼ãƒ‰ãƒ‡ã‚£ã‚¹ã‚¯</strong>: æ°¸ç¶šçš„ãªãƒ‡ãƒ¼ã‚¿ä¿å­˜è£…ç½®
                                    </div>
                                    <div class="wa-concept-item">
                                        <strong>ãƒˆãƒ©ãƒ³ã‚¸ã‚¹ã‚¿</strong>: ãƒ‡ã‚¸ã‚¿ãƒ«ä¿¡å·ã®åˆ¶å¾¡ã‚’è¡Œã†åŸºæœ¬ç´ å­
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 2é€²æ•°ãƒ»16é€²æ•°ã®æ¦‚å¿µ -->
            <div class="wa-content-section" id="binary">
                <div class="wa-story-content">
                    <div class="wa-story-header">
                        <h2 class="wa-story-title">ğŸ’» 2é€²æ•°ãƒ»16é€²æ•°ã®æ¦‚å¿µ</h2>
                        <div class="wa-story-subtitle">ç¬¬ä¸‰ç« ï¼šæš—å·è§£èª­å¸«ã®æ‹</div>
                        <div class="wa-divider"></div>
                    </div>

                    <div class="wa-story-layout">
                        <div class="wa-story-main">
                            <div class="wa-story-body">
                                <div class="wa-story-scroll" id="binaryStoryScroll">
                                    <div class="wa-story-section">
                                        <div class="wa-typewriter-text" id="binaryStory">
                                            1944å¹´ã€è‹±å›½ã®æš—å·è§£èª­æ‰€ã€‚è‹¥ãæ•°å­¦è€…ãƒ»ç« å¤ªéƒã¯ã€ãƒ‰ã‚¤ãƒ„è»ã®æš—å·ã¨æ ¼é—˜ã—ã¦ã„ãŸã€‚<br><br>

                                            ãã®æ—¥ã€å½¼ã®å…ƒã«å±Šã„ãŸæš—å·ã¯ã€ã“ã‚Œã¾ã§ã¨ã¯é•ã£ã¦ã„ãŸã€‚<br>
                                            "101101110011 110000111001 100101110000"<br><br>

                                            ã“ã‚Œã¯2é€²æ•°ã§æ›¸ã‹ã‚Œã¦ã„ã‚‹ã€‚ç« å¤ªéƒã¯ã™ãã«æ°—ã¥ã„ãŸã€‚<br>
                                            ã“ã‚Œã¯æ•µã®æš—å·ã§ã¯ãªãã€æ‹äººãƒ»èŠ±å­ã‹ã‚‰ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã ã£ãŸã€‚<br><br>

                                            2é€²æ•°ã‹ã‚‰10é€²æ•°ã«å¤‰æ›ã—ã¦ã¿ã‚‹ã€‚<br>
                                            - 101101110011 = 2931<br>
                                            - 110000111001 = 3129<br>
                                            - 100101110000 = 2416<br><br>

                                            ã—ã‹ã—ã€æ•°å­—ã ã‘ã§ã¯æ„å‘³ãŒåˆ†ã‹ã‚‰ãªã„ã€‚ç« å¤ªéƒã¯16é€²æ•°ã§ã‚‚è©¦ã—ã¦ã¿ãŸã€‚<br>
                                            - 2931 â†’ B73 (16é€²æ•°)<br>
                                            - 3129 â†’ C39<br>
                                            - 2416 â†’ 970<br><br>

                                            ãã®æ™‚ã€ç« å¤ªéƒã¯ASCIIã‚³ãƒ¼ãƒ‰è¡¨ã‚’è¦‹ã¦ã„ãŸã€‚<br>
                                            - B = 66 + 7 = 73 â†’ 'I'<br>
                                            - C = 67 + 3 = 32 + 9 = ' L'<br>
                                            - 970 â†’ 'ove'<br><br>

                                            "I Love" - èŠ±å­ã‹ã‚‰ã®æ„›ã®å‘Šç™½ã ã£ãŸã€‚<br><br>

                                            <div class="wa-poem-section">
                                                <div class="wa-poem-title">ğŸ“œ é€²æ•°ã®çŸ­æ­Œ</div>
                                                <div class="wa-poem-text">
                                                    äºŒé€²æ³•<br>
                                                    åå…­é€²æ³•ã€€å¿ƒã‚’èª­ã¿<br>
                                                    æš—å·è§£ã<br>
                                                    æ„›ã‚’çŸ¥ã‚Šã‘ã‚Š<br>
                                                </div>
                                            </div><br>

                                            æˆ¦å¾Œã€äºŒäººã¯çµå©šã—ãŸã€‚ç« å¤ªéƒã¯ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã®é–‹ç™ºè€…ã¨ãªã‚Šã€<br>
                                            èŠ±å­ã¯ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ã¨ãªã£ãŸã€‚äºŒäººã®æ‹ãŒã€ãƒ‡ã‚¸ã‚¿ãƒ«æŠ€è¡“ã®æœªæ¥ã‚’åˆ‡ã‚Šé–‹ã„ãŸã€‚
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="wa-story-sidebar">
                            <div class="wa-key-concepts">
                                <h3 class="wa-concepts-title">ğŸ”‘ é‡è¦æ¦‚å¿µ</h3>
                                <div class="wa-concept-list">
                                    <div class="wa-concept-item">
                                        <strong>2é€²æ•°</strong>: 0ã¨1ã ã‘ã§æ•°ã‚’è¡¨ç¾ã™ã‚‹æ–¹æ³•ã€ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã®åŸºæœ¬
                                    </div>
                                    <div class="wa-concept-item">
                                        <strong>16é€²æ•°</strong>: 0-9ã¨A-Fã§æ•°ã‚’è¡¨ç¾ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã§ä½¿ç”¨
                                    </div>
                                    <div class="wa-concept-item">
                                        <strong>é€²æ•°å¤‰æ›</strong>: ç•°ãªã‚‹é€²æ•°é–“ã®æ•°å€¤å¤‰æ›æŠ€è¡“
                                    </div>
                                    <div class="wa-concept-item">
                                        <strong>æ¡ä¸ŠãŒã‚Š</strong>: ä¸‹ä½ã‹ã‚‰ä¸Šä½ã¸ã®æ•°å€¤ç¹°ã‚Šä¸ŠãŒã‚Š
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- æ–‡å­—ã‚³ãƒ¼ãƒ‰ï¼ˆUTF-8ï¼‰ -->
            <div class="wa-content-section" id="encoding">
                <div class="wa-story-content">
                    <div class="wa-story-header">
                        <h2 class="wa-story-title">ğŸŒ æ–‡å­—ã‚³ãƒ¼ãƒ‰ï¼ˆUTF-8ï¼‰</h2>
                        <div class="wa-story-subtitle">ç¬¬å››ç« ï¼šå›½éš›æ‹æ–‡ã®æ–‡å­—åŒ–ã‘</div>
                        <div class="wa-divider"></div>
                    </div>

                    <div class="wa-story-layout">
                        <div class="wa-story-main">
                            <div class="wa-story-body">
                                <div class="wa-story-scroll" id="encodingStoryScroll">
                                    <div class="wa-story-section">
                                        <div class="wa-typewriter-text" id="encodingStory">
                                            1950å¹´ã€å¤§å­¦ã§å­¦ã¶æ—¥æœ¬äººç•™å­¦ç”Ÿãƒ»ç¾å¹¸ã€‚å½¼å¥³ã¯ã‚¢ãƒ¡ãƒªã‚«äººã®æ‹äººãƒ»ã‚¸ãƒ§ãƒ³ã¨æ‰‹ç´™ã§é è·é›¢æ‹æ„›ã‚’ã—ã¦ã„ãŸã€‚<br><br>

                                            ã‚ã‚‹æ—¥ã€ã‚¸ãƒ§ãƒ³ã‹ã‚‰å±Šã„ãŸæ‰‹ç´™ãŒå¥‡å¦™ã ã£ãŸã€‚<br>
                                            "I ï¿½ï¿½ï¿½ you, my ï¿½ï¿½ï¿½"<br><br>

                                            ç¾å¹¸ã®æ—¥æœ¬èªã®éƒ¨åˆ†ãŒã€ã™ã¹ã¦æ–‡å­—åŒ–ã‘ã—ã¦ã„ãŸã€‚<br>
                                            ã“ã‚Œã¯æ–‡å­—ã‚³ãƒ¼ãƒ‰ã®å•é¡Œã ã£ãŸã€‚<br><br>

                                            å½“æ™‚ã®ASCIIã‚³ãƒ¼ãƒ‰ã¯ã€è‹±æ•°å­—ã—ã‹æ‰±ãˆãªã„ã€‚<br>
                                            - ASCII: 7ãƒ“ãƒƒãƒˆï¼ˆ128æ–‡å­—ï¼‰<br>
                                            - æ—¥æœ¬èª: ã²ã‚‰ãŒãªãƒ»ã‚«ã‚¿ã‚«ãƒŠãƒ»æ¼¢å­—ã§æ•°åƒæ–‡å­—<br><br>

                                            ç¾å¹¸ã¯ç ”ç©¶ã—ãŸã€‚æ—¥æœ¬ã§ã¯å„ç¤¾ãŒç‹¬è‡ªã®æ–‡å­—ã‚³ãƒ¼ãƒ‰ã‚’é–‹ç™ºã€‚<br>
                                            - Shift_JIS: ãƒã‚¤ã‚¯ãƒ­ã‚½ãƒ•ãƒˆãŒé–‹ç™º<br>
                                            - EUC-JP: Unixç³»ã§ä½¿ç”¨<br>
                                            - ISO-2022-JP: ãƒ¡ãƒ¼ãƒ«ã§ä½¿ç”¨<br><br>

                                            ã—ã‹ã—ã€ã“ã‚Œã‚‰ã¯äº’ã„ã«äº’æ›æ€§ãŒãªã„ã€‚<br>
                                            ç•°ãªã‚‹ã‚·ã‚¹ãƒ†ãƒ é–“ã§ãƒ†ã‚­ã‚¹ãƒˆã‚’äº¤æ›ã™ã‚‹ã¨æ–‡å­—åŒ–ã‘ãŒç™ºç”Ÿã™ã‚‹ã€‚<br><br>

                                            ãã“ã§é¢¯çˆ½ã¨ã—ãŸã®ãŒUTF-8ã€‚<br>
                                            - ä¸–ç•Œä¸­ã®ã‚ã‚‰ã‚†ã‚‹æ–‡å­—ã‚’ä¸€ã¤ã®ã‚³ãƒ¼ãƒ‰ã§è¡¨ç¾<br>
                                            - å¯å¤‰é•·ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°<br>
                                            - ASCIIã¨ã®ä¸‹ä½äº’æ›æ€§<br><br>

                                            <div class="wa-poem-section">
                                                <div class="wa-poem-title">ğŸ“œ æ–‡å­—ã®çŸ­æ­Œ</div>
                                                <div class="wa-poem-text">
                                                    ä¸–ç•Œã‚’çµã¶<br>
                                                    UTF-8ã€€æ‹æ–‡ã‚’<br>
                                                    æ–‡å­—åŒ–ã‘ã›ãš<br>
                                                    æƒ³ã„ã‚’ä¼ãˆã‚“<br>
                                                </div>
                                            </div><br>

                                            ç¾ä»£ã®Webã‚„ãƒ¡ãƒ¼ãƒ«ã§ã¯UTF-8ãŒæ¨™æº–ã¨ãªã£ãŸã€‚<br>
                                            ç¾å¹¸ã¨ã‚¸ãƒ§ãƒ³ã®æ‹æ–‡ã‚‚ã€ä»Šã§ã¯æ—¥æœ¬èªã‚‚è‹±èªã‚‚ç¾ã—ãè¡¨ç¤ºã•ã‚Œã‚‹ã€‚
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="wa-story-sidebar">
                            <div class="wa-key-concepts">
                                <h3 class="wa-concepts-title">ğŸ”‘ é‡è¦æ¦‚å¿µ</h3>
                                <div class="wa-concept-list">
                                    <div class="wa-concept-item">
                                        <strong>æ–‡å­—ã‚³ãƒ¼ãƒ‰</strong>: æ–‡å­—ã‚’ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã§æ‰±ã†ãŸã‚ã®æ•°å€¤å¯¾å¿œè¡¨
                                    </div>
                                    <div class="wa-concept-item">
                                        <strong>UTF-8</strong>: ä¸–ç•Œä¸­ã®æ–‡å­—ã‚’ä¸€ã¤ã®ã‚³ãƒ¼ãƒ‰ã§è¡¨ç¾ã™ã‚‹æ–¹å¼
                                    </div>
                                    <div class="wa-concept-item">
                                        <strong>æ–‡å­—åŒ–ã‘</strong>: æ–‡å­—ã‚³ãƒ¼ãƒ‰ã®é•ã„ã«ã‚ˆã£ã¦æ­£ã—ãè¡¨ç¤ºã•ã‚Œãªã„ç¾è±¡
                                    </div>
                                    <div class="wa-concept-item">
                                        <strong>ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°</strong>: æ–‡å­—ã‚’ãƒã‚¤ãƒˆåˆ—ã«å¤‰æ›ã™ã‚‹æ–¹å¼
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚ºã®æ¦‚å¿µ -->
            <div class="wa-content-section" id="datasize">
                <div class="wa-story-content">
                    <div class="wa-story-header">
                        <h2 class="wa-story-title">ğŸ“Š ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚ºã®æ¦‚å¿µ</h2>
                        <div class="wa-story-subtitle">ç¬¬äº”ç« ï¼šå†™çœŸãƒ‡ãƒ¼ã‚¿ã§ç¶´ã‚‹æ€ã„å‡ºã®é‡ã•</div>
                        <div class="wa-divider"></div>
                    </div>

                    <div class="wa-story-layout">
                        <div class="wa-story-main">
                            <div class="wa-story-body">
                                <div class="wa-story-scroll" id="datasizeStoryScroll">
                                    <div class="wa-story-section">
                                        <div class="wa-typewriter-text" id="datasizeStory">
                                            1990å¹´ã€ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãŒå®¶åº­ã«æ™®åŠã—å§‹ã‚ãŸæ™‚ä»£ã€‚å¤§å­¦ç”Ÿã®ç”±ç¾ã¯ã€äº¤æ›æ—¥è¨˜ã§å‡ºä¼šã£ãŸã‚¢ãƒ¡ãƒªã‚«äººã®ãƒã‚¤ã‚¯ã¨é è·é›¢æ‹æ„›ä¸­ã€‚<br><br>

                                            å½¼å¥³ã®ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã®ãƒãƒ¼ãƒ‰ãƒ‡ã‚£ã‚¹ã‚¯ã¯10MBï¼ˆãƒ¡ã‚¬ãƒã‚¤ãƒˆï¼‰ã—ã‹ãªã„ã€‚<br>
                                            ãƒã‚¤ã‚¯ã¨ã®å†™çœŸã‚’ä¸€æšä¿å­˜ã™ã‚‹ã ã‘ã§ã€è²´é‡ãªå®¹é‡ã‚’æ¶ˆè²»ã—ã¦ã—ã¾ã†ã€‚<br><br>

                                            æƒ…å ±ã®å˜ä½ã‚’ç†è§£ã—ã‚ˆã†ã€‚<br>
                                            - 1ãƒ“ãƒƒãƒˆ = 0ã¾ãŸã¯1ã®æƒ…å ±<br>
                                            - 1ãƒã‚¤ãƒˆ = 8ãƒ“ãƒƒãƒˆ<br>
                                            - 1KB = 1,024ãƒã‚¤ãƒˆ<br>
                                            - 1MB = 1,024KB = 1,048,576ãƒã‚¤ãƒˆ<br>
                                            - 1GB = 1,024MB<br><br>

                                            å½“æ™‚ã®ãƒ‡ã‚¸ã‚¿ãƒ«ã‚«ãƒ¡ãƒ©ã§ã¯ã€ä¸€æšã®å†™çœŸãŒç´„1MBã€‚<br>
                                            ãƒãƒ¼ãƒ‰ãƒ‡ã‚£ã‚¹ã‚¯ã«10æšã—ã‹ä¿å­˜ã§ããªã„ã€‚<br><br>

                                            ç”±ç¾ã¯è€ƒãˆãŸã€‚ãƒ•ãƒ­ãƒƒãƒ”ãƒ¼ãƒ‡ã‚£ã‚¹ã‚¯ã¯1.44MBã€‚<br>
                                            ãƒã‚¤ã‚¯ã¨ã®å†™çœŸã‚’é€ã‚‹ã«ã¯ã€ãƒ¡ãƒ¼ãƒ«ã§é€ä¿¡ã™ã‚‹ã—ã‹ãªã„ã€‚<br><br>

                                            ã—ã‹ã—ã€å½“æ™‚ã®ãƒ¡ãƒ¼ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã¯æ•°ç™¾ã‚­ãƒ­ãƒã‚¤ãƒˆã¾ã§ã—ã‹é€ä¿¡ã§ããªã„ã€‚<br>
                                            1MBã®å†™çœŸã¯é€ã‚Œãªã„ã®ã ã€‚<br><br>

                                            <div class="wa-poem-section">
                                                <div class="wa-poem-title">ğŸ“œ ãƒ‡ãƒ¼ã‚¿ã®çŸ­æ­Œ</div>
                                                <div class="wa-poem-text">
                                                    ãƒ¡ã‚¬ãƒã‚¤ãƒˆ<br>
                                                    ã²ã¨ã¤ã²ã¨ã¤ã®ã€€æ€ã„å‡º<br>
                                                    é€ã‚ŠãŸãã‘ã‚Œã©<br>
                                                    å®¹é‡è¶³ã‚‰ãš<br>
                                                </div>
                                            </div><br>

                                            ä»Šã§ã¯ã‚®ã‚¬ãƒã‚¤ãƒˆã€ãƒ†ãƒ©ãƒã‚¤ãƒˆã®æ™‚ä»£ã€‚<br>
                                            ç”±ç¾ã¨ãƒã‚¤ã‚¯ã¯çµå©šã—ã€ã‚¯ãƒ©ã‚¦ãƒ‰ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã§ä½•ä¸‡æšã‚‚ã®æ€ã„å‡ºã‚’ä¿å­˜ã—ã¦ã„ã‚‹ã€‚
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="wa-story-sidebar">
                            <div class="wa-key-concepts">
                                <h3 class="wa-concepts-title">ğŸ”‘ é‡è¦æ¦‚å¿µ</h3>
                                <div class="wa-concept-list">
                                    <div class="wa-concept-item">
                                        <strong>ãƒã‚¤ãƒˆ</strong>: ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã®åŸºæœ¬ãƒ‡ãƒ¼ã‚¿å˜ä½ï¼ˆ8ãƒ“ãƒƒãƒˆï¼‰
                                    </div>
                                    <div class="wa-concept-item">
                                        <strong>KBï¼ˆã‚­ãƒ­ãƒã‚¤ãƒˆï¼‰</strong>: 1,024ãƒã‚¤ãƒˆã€ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚µã‚¤ã‚º
                                    </div>
                                    <div class="wa-concept-item">
                                        <strong>MBï¼ˆãƒ¡ã‚¬ãƒã‚¤ãƒˆï¼‰</strong>: 1,024KBã€ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚µã‚¤ã‚º
                                    </div>
                                    <div class="wa-concept-item">
                                        <strong>GBï¼ˆã‚®ã‚¬ãƒã‚¤ãƒˆï¼‰</strong>: 1,024MBã€ãƒãƒ¼ãƒ‰ãƒ‡ã‚£ã‚¹ã‚¯ã®å®¹é‡
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- æµ®å‹•å°æ•°ç‚¹æ•° -->
            <div class="wa-content-section" id="floating">
                <div class="wa-story-content">
                    <div class="wa-story-header">
                        <h2 class="wa-story-title">ğŸ—ºï¸ æµ®å‹•å°æ•°ç‚¹æ•°</h2>
                        <div class="wa-story-subtitle">ç¬¬å…­ç« ï¼šæ¸¬é‡æŠ€å¸«ã®ç²¾å¯†ãªæ„›ã®è¨ˆç®—</div>
                        <div class="wa-divider"></div>
                    </div>

                    <div class="wa-story-layout">
                        <div class="wa-story-main">
                            <div class="wa-story-body">
                                <div class="wa-story-scroll" id="floatingStoryScroll">
                                    <div class="wa-story-section">
                                        <div class="wa-typewriter-text" id="floatingStory">
                                            1955å¹´ã€åœ°ç†æ¸¬é‡æ‰€ã®æŠ€å¸«ãƒ»ä¸€éƒã¯ã€æ‹äººãƒ»ç« å­ã¨ã®çµå©šå¼ã®ãŸã‚ã«æ•™ä¼šã¾ã§ã®æ­£ç¢ºãªè·é›¢ã‚’è¨ˆç®—ã—ã¦ã„ãŸã€‚<br><br>

                                            GPSãŒãªã„æ™‚ä»£ã€æ¸¬é‡ã¯æ‰‹ä½œæ¥­ã€‚ä¸‰è§’æ³•ã§è¨ˆç®—ã™ã‚‹ã¨...<br>
                                            æ•™ä¼šã¾ã§ã®ç›´ç·šè·é›¢: 3.14159265358979...ã‚­ãƒ­ãƒ¡ãƒ¼ãƒˆãƒ«<br><br>

                                            ã“ã®ç„¡é™å°æ•°ã‚’ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã§ã©ã†è¡¨ç¾ã™ã‚‹ï¼Ÿ<br>
                                            æ•´æ•°ã¨ã¯é•ã„ã€å°æ•°ã«ã¯ã€Œæµ®å‹•å°æ•°ç‚¹ã€ã¨ã„ã†æ–¹å¼ãŒå¿…è¦ã ã€‚<br><br>

                                            æµ®å‹•å°æ•°ç‚¹ã®ä»•çµ„ã¿ï¼š<br>
                                            - ç¬¦å·ãƒ“ãƒƒãƒˆ: æ­£è² ã®ç¬¦å·<br>
                                            - æŒ‡æ•°éƒ¨: å°æ•°ç‚¹ã®ä½ç½®<br>
                                            - ä»®æ•°éƒ¨: å®Ÿéš›ã®æ•°å€¤ãƒ‡ãƒ¼ã‚¿<br><br>

                                            ä¾‹: 3.14159 â†’ 1.14159 Ã— 2Â¹ (2é€²æ•°ã§)<br><br>

                                            ã—ã‹ã—ã€æµ®å‹•å°æ•°ç‚¹ã«ã¯è½ã¨ã—ç©´ãŒã‚ã‚‹ã€‚<br>
                                            0.1 + 0.2 = 0.30000000000000004<br>
                                            ã“ã‚Œã¯2é€²æ•°ã§ã¯0.1ã‚’æ­£ç¢ºã«è¡¨ç¾ã§ããªã„ã‹ã‚‰ã ã€‚<br><br>

                                            ä¸€éƒã¯ç²¾å¯†ãªè¨ˆç®—ã®ãŸã‚ã€å›ºå®šå°æ•°ç‚¹ã‚„æœ‰ç†æ•°æ¼”ç®—ã‚’ä½¿ã†ã“ã¨ã«ã—ãŸã€‚<br><br>

                                            <div class="wa-poem-section">
                                                <div class="wa-poem-title">ğŸ“œ æ•°å€¤ã®çŸ­æ­Œ</div>
                                                <div class="wa-poem-text">
                                                    ç„¡é™ã‚’<br>
                                                    æœ‰é™ã§è¡¨ã—ã€€æ•°ã€…ã‹ãª<br>
                                                    æµ®å‹•å°æ•°<br>
                                                    æ„›ã‚‚è¨ˆç®—<br>
                                                </div>
                                            </div><br>

                                            çµå©šå¼ã®æ—¥ã€ä¸€éƒã¯ç« å­ã«è¨€ã£ãŸã€‚<br>
                                            ã€Œå›ã¸ã®æ„›ã¯æµ®å‹•å°æ•°ç‚¹ã˜ã‚ƒè¡¨ç¾ã§ããªã„ã€‚ç„¡é™å¤§ã ã‹ã‚‰ã€
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="wa-story-sidebar">
                            <div class="wa-key-concepts">
                                <h3 class="wa-concepts-title">ğŸ”‘ é‡è¦æ¦‚å¿µ</h3>
                                <div class="wa-concept-list">
                                    <div class="wa-concept-item">
                                        <strong>æµ®å‹•å°æ•°ç‚¹</strong>: ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã§å°æ•°ã‚’è¡¨ç¾ã™ã‚‹æ–¹å¼
                                    </div>
                                    <div class="wa-concept-item">
                                        <strong>IEEE 754</strong>: æµ®å‹•å°æ•°ç‚¹æ•°ã®åœ‹éš›æ¨™æº–
                                    </div>
                                    <div class="wa-concept-item">
                                        <strong>ä¸¸ã‚èª¤å·®</strong>: æœ‰é™ã®ãƒ“ãƒƒãƒˆã§ç„¡é™å°æ•°ã‚’è¡¨ç¾ã™ã‚‹ã“ã¨ã§ç™ºç”Ÿã™ã‚‹èª¤å·®
                                    </div>
                                    <div class="wa-concept-item">
                                        <strong>ä»®æ•°éƒ¨ãƒ»æŒ‡æ•°éƒ¨</strong>: æµ®å‹•å°æ•°ç‚¹æ•°ã®æ§‹æˆè¦ç´ 
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ãƒ‡ãƒ¼ã‚¿åœ§ç¸® -->
            <div class="wa-content-section" id="compression">
                <div class="wa-story-content">
                    <div class="wa-story-header">
                        <h2 class="wa-story-title">ğŸ“¦ ãƒ‡ãƒ¼ã‚¿åœ§ç¸®</h2>
                        <div class="wa-story-subtitle">ç¬¬ä¸ƒç« ï¼šé™ã‚‰ã‚ŒãŸé€šä¿¡ã§ä¼ãˆã‚‹æƒ³ã„</div>
                        <div class="wa-divider"></div>
                    </div>

                    <div class="wa-story-layout">
                        <div class="wa-story-main">
                            <div class="wa-story-body">
                                <div class="wa-story-scroll" id="compressionStoryScroll">
                                    <div class="wa-story-section">
                                        <div class="wa-typewriter-text" id="compressionStory">
                                            1969å¹´ã€ã‚¢ãƒãƒ­11å·ã®æ™‚ä»£ã€‚ç„¡ç·šé€šä¿¡æŠ€å¸«ã®å…«éƒã¯ã€åœ°çƒã‹ã‚‰æœˆã®åŸºåœ°ã§åƒãæ‹äººãƒ»ã‹ãŠã‚Šã¸ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ã£ã¦ã„ãŸã€‚<br><br>

                                            ã—ã‹ã—ã€åœ°çƒã‹ã‚‰æœˆã¾ã§ã®é€šä¿¡ã¯æ¥µã‚ã¦é™ã‚‰ã‚Œã¦ã„ã‚‹ã€‚<br>
                                            1æ—¥ã«é€ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿é‡ã¯ã‚ãšã‹10KBã€‚<br><br>

                                            å…«éƒã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯é•·ã„ã€‚<br>
                                            ã€Œã‹ãŠã‚Šã¸ã€‚ä»Šæ—¥ã‚‚å›ã‚’æ€ã£ã¦ã„ã¾ã™ã€‚ã“ã®é ã„å®‡å®™ã®ä¸­ã§ã€å›ã¸ã®æ„›ã ã‘ãŒç§ã®å¿ƒã‚’æ”¯ãˆã¦ã„ã¾ã™ã€‚ã€<br><br>

                                            ã“ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’ãã®ã¾ã¾é€ã‚‹ã¨1200ãƒã‚¤ãƒˆã€‚ã—ã‹ã—ã€åœ§ç¸®ã™ã‚Œã°...<br><br>

                                            ãƒ‡ãƒ¼ã‚¿åœ§ç¸®ã®åŸç†ï¼š<br>
                                            1. ç¹°ã‚Šè¿”ã—ã®æ¤œå‡º: ã€Œå›ã¸ã€ãŒ3å›å‡ºç¾<br>
                                            2. è¾æ›¸åŒ–: ã€Œå›ã¸ã€â†’ ã€Œ#1ã€ã§ç½®ãæ›ãˆ<br>
                                            3. LZ77ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ : éå»ã«å‡ºç¾ã—ãŸæ–‡å­—åˆ—ã‚’å‚ç…§<br><br>

                                            çµæœã€800ãƒã‚¤ãƒˆã¾ã§åœ§ç¸®ã§ããŸã€‚<br>
                                            ç¸®ç‡: 33%ã€400ãƒã‚¤ãƒˆã®ç¯€ç´„ã€‚<br><br>

                                            ã—ã‹ã—ã€åœ§ç¸®ã«ã¯ãƒªã‚¹ã‚¯ã‚‚ã‚ã‚‹ã€‚<br>
                                            éå¯é€†åœ§ç¸®ã ã¨ã€æƒ…å ±ãŒæ°¸ä¹…ã«å¤±ã‚ã‚Œã‚‹ã€‚<br>
                                            JPEGå†™çœŸã®ã‚ˆã†ã«ã€åœ§ç¸®ã™ã‚‹ãŸã³ã«ç”»è³ªãŒåŠ£åŒ–ã™ã‚‹ã€‚<br><br>

                                            <div class="wa-poem-section">
                                                <div class="wa-poem-title">ğŸ“œ åœ§ç¸®ã®çŸ­æ­Œ</div>
                                                <div class="wa-poem-text">
                                                    æƒ³ã„ã‚’ã“ã‚<br>
                                                    æ•°å°‘ãªæ–‡å­—ã§ã€€ä¼ãˆãŸã<br>
                                                    åœ§ç¸®ã‚¢ãƒ«ã‚´<br>
                                                    æ„›ã‚’ç¯€ç´„ã›ã‚“<br>
                                                </div>
                                            </div><br>

                                            ã‚¢ãƒãƒ­è¨ˆç”»ãŒæˆåŠŸã—ã€ã‹ãŠã‚Šã¯åœ°çƒã«å¸°é‚„ã—ãŸã€‚<br>
                                            å…«éƒã¯è¨€ã£ãŸã€‚ã€Œåœ§ç¸®ã—ãŸæƒ…å ±ã®ä¸­ã«ã€åƒ•ã®å…¨ã¦ã®æ„›ãŒè©°ã¾ã£ã¦ã„ãŸã‚“ã ã€
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="wa-story-sidebar">
                            <div class="wa-key-concepts">
                                <h3 class="wa-concepts-title">ğŸ”‘ é‡è¦æ¦‚å¿µ</h3>
                                <div class="wa-concept-list">
                                    <div class="wa-concept-item">
                                        <strong>ãƒ‡ãƒ¼ã‚¿åœ§ç¸®</strong>: ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚ºã‚’å°ã•ãã™ã‚‹æŠ€è¡“
                                    </div>
                                    <div class="wa-concept-item">
                                        <strong>å¯é€†åœ§ç¸®</strong>: æƒ…å ±ã‚’å¤±ã‚ãšã«åœ§ç¸®ã™ã‚‹æ–¹å¼ï¼ˆZIPãªã©ï¼‰
                                    </div>
                                    <div class="wa-concept-item">
                                        <strong>éå¯é€†åœ§ç¸®</strong>: æƒ…å ±ã‚’æ¨ã¦ã¦åœ§ç¸®ã™ã‚‹æ–¹å¼ï¼ˆJPEGãªã©ï¼‰
                                    </div>
                                    <div class="wa-concept-item">
                                        <strong>LZç³»ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ </strong>: ç¹°ã‚Šè¿”ã—ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’åˆ©ç”¨ã—ãŸåœ§ç¸®æ‰‹æ³•
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ãã®ä»–ã®åˆ†é‡ -->
            <div class="wa-content-section" id="algorithms">
                <div class="wa-coming-soon">
                    <div class="wa-coming-soon-icon">ğŸš§</div>
                    <div class="wa-coming-soon-text">ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ åˆ†é‡ã®ç‰©èªã¯æº–å‚™ä¸­ã§ã™</div>
                    <div class="wa-coming-soon-subtitle">åŠ¹ç‡çš„ãªæ„›ã®ä¼é”æ–¹æ³•ã‚’ãŠæ¥½ã—ã¿ã«...</div>
                </div>
            </div>

            <div class="wa-content-section" id="web">
                <div class="wa-coming-soon">
                    <div class="wa-coming-soon-icon">ğŸš§</div>
                    <div class="wa-coming-soon-text">WebæŠ€è¡“åˆ†é‡ã®ç‰©èªã¯æº–å‚™ä¸­ã§ã™</div>
                    <div class="wa-coming-soon-subtitle">é è·é›¢æ‹æ„›ã‚’æ”¯ãˆã‚‹Webã®ç‰©èªã‚’ãŠæ¥½ã—ã¿ã«...</div>
                </div>
            </div>

            <div class="wa-content-section" id="network">
                <div class="wa-coming-soon">
                    <div class="wa-coming-soon-icon">ğŸš§</div>
                    <div class="wa-coming-soon-text">ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯åˆ†é‡ã®ç‰©èªã¯æº–å‚™ä¸­ã§ã™</div>
                    <div class="wa-coming-soon-subtitle">æˆ¦æ™‚é€šä¿¡ç¶²ã®æ‹æ„›ç‰©èªã‚’ãŠæ¥½ã—ã¿ã«...</div>
                </div>
            </div>

            <div class="wa-content-section" id="security">
                <div class="wa-coming-soon">
                    <div class="wa-coming-soon-icon">ğŸš§</div>
                    <div class="wa-coming-soon-text">ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£åˆ†é‡ã®ç‰©èªã¯æº–å‚™ä¸­ã§ã™</div>
                    <div class="wa-coming-soon-subtitle">æš—å·åŒ–ã•ã‚ŒãŸæ„›ã®æ‰‹ç´™ã®ç‰©èªã‚’ãŠæ¥½ã—ã¿ã«...</div>
                </div>
            </div>
        </section>
        -->

        <!-- ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ -->
        <div class="wa-btn-group" style="margin-top: 3rem;">
            <button class="wa-btn wa-btn-primary" onclick="goToQuiz()">
                <span>âš”ï¸</span>
                <span>é›…ãªã‚‹ã‚¯ã‚¤ã‚ºå¯¾æˆ¦ã¸</span>
            </button>
            <button class="wa-btn wa-btn-secondary" onclick="goHome()">
                <span>ğŸ </span>
                <span>å­¦ç¿’ã®é–“ã‚’å‡ºã‚‹</span>
            </button>
        </div>
    </main>

    <style>
        /* Guestå°‚ç”¨åŒæœŸãƒ‘ãƒãƒ«ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .wa-guest-sync-panel {
            animation: wa-slide-in 0.6s ease-out;
        }
        
        .wa-sync-card {
            background: linear-gradient(135deg, #f8f4ff 0%, #fff0f8 100%);
            border: 2px solid var(--take);
            border-radius: var(--border-radius-large);
            padding: var(--spacing-lg);
        }
        
        .wa-sync-header {
            display: flex;
            align-items: center;
            margin-bottom: var(--spacing-md);
            gap: var(--spacing-sm);
        }
        
        .wa-sync-icon {
            font-size: 1.8rem;
        }
        
        .wa-sync-title {
            color: var(--enjhi);
            font-family: var(--font-accent);
            font-size: 1.4rem;
            margin: 0;
            flex-grow: 1;
        }
        
        .wa-sync-status-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--take);
            animation: wa-pulse 2s infinite;
        }
        
        .wa-sync-status-dot.wa-sync-success {
            background: var(--take);
        }
        
        .wa-sync-status-dot.wa-sync-error {
            background: var(--enjhi);
            animation: none;
        }
        
        .wa-sync-description {
            color: var(--sumi);
            line-height: 1.6;
            margin-bottom: var(--spacing-md);
        }
        
        .wa-sync-info {
            padding: var(--spacing-sm) 0;
            border-top: 1px solid rgba(178, 45, 53, 0.2);
        }
        
        .wa-sync-status-text {
            color: var(--take);
            font-weight: 600;
            font-size: 0.9rem;
        }
        
        /* ç„¡åŠ¹åŒ–ã•ã‚ŒãŸãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ */
        .wa-nav-item.wa-nav-disabled {
            opacity: 0.4;
            cursor: not-allowed;
            background: rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }
        
        .wa-nav-item.wa-nav-disabled:hover {
            transform: none;
            background: rgba(0, 0, 0, 0.05);
        }
        
        /* Guesté€šçŸ¥ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .wa-guest-notice {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 10000;
            background: var(--gradient-sakura);
            border: 2px solid var(--enjhi);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-strong);
            max-width: 350px;
            animation: wa-notice-slide-in 0.4s ease-out;
        }
        
        .wa-notice-content {
            display: flex;
            align-items: flex-start;
            padding: var(--spacing-lg);
            gap: var(--spacing-md);
        }
        
        .wa-notice-icon {
            font-size: 2rem;
            flex-shrink: 0;
        }
        
        .wa-notice-text h4 {
            color: var(--enjhi);
            font-family: var(--font-accent);
            margin: 0 0 var(--spacing-xs) 0;
            font-size: 1.1rem;
        }
        
        .wa-notice-text p {
            color: var(--sumi);
            margin: 0;
            line-height: 1.5;
            font-size: 0.9rem;
        }
        
        .wa-notice-close {
            background: none;
            border: none;
            color: var(--enjhi);
            font-size: 1.4rem;
            font-weight: bold;
            cursor: pointer;
            padding: 0;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.2s ease;
            flex-shrink: 0;
        }
        
        .wa-notice-close:hover {
            background: rgba(178, 45, 53, 0.1);
        }
        
        /* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        @keyframes wa-notice-slide-in {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        .wa-fade-out {
            animation: wa-notice-slide-out 0.3s ease-in forwards;
        }
        
        @keyframes wa-notice-slide-out {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }
        
        @keyframes wa-slide-in {
            from {
                transform: translateY(-20px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        @keyframes wa-pulse {
            0%, 100% {
                opacity: 1;
                transform: scale(1);
            }
            50% {
                opacity: 0.7;
                transform: scale(1.2);
            }
        }
        
        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ */
        @media (max-width: 768px) {
            .wa-guest-notice {
                left: 10px;
                right: 10px;
                top: 10px;
                max-width: none;
            }
            
            .wa-sync-card {
                padding: var(--spacing-md);
            }
            
            .wa-sync-title {
                font-size: 1.2rem;
            }
        }
    </style>
    <!-- çµ±åˆæ¸ˆã¿: æœ«å°¾ã®é‡è¤‡ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯å‰Šé™¤ã—ã¾ã—ãŸï¼ˆä¸Šéƒ¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§åŒæœŸãƒ»è£…é£¾ã‚’ä¸€å…ƒç®¡ç†ï¼‰ -->
</body>
</html>