<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>通知デモB - 帯リボン（下部センター）</title>
  <link rel="stylesheet" href="css/taisho.css" />
  <style>
    body { padding: 24px; }

    /* 帯リボン */
    .wa-ribbon {
      position: fixed;
      left: 50%;
      bottom: 20px;
      transform: translateX(-50%) translateY(120%);
      z-index: 10000;
      width: min(520px, calc(100vw - 24px));
      color: var(--yuki);
      background: linear-gradient(90deg, rgba(22,94,131,.85), rgba(255,183,77,.85));
      border: 2px solid rgba(22,94,131,.6);
      border-radius: 14px;
      box-shadow: var(--shadow-strong);
      padding: 10px 14px;
      display: grid;
      grid-template-columns: auto 1fr auto;
      gap: 10px;
      align-items: center;
      opacity: 0;
    }
    .wa-ribbon .wa-icon { font-size: 1.2rem; }
    .wa-ribbon .wa-text { font-weight: 600; letter-spacing: .02em; }
    .wa-ribbon .wa-count { font-family: var(--font-ui); font-weight: 800; }

    .wa-ribbon.show { animation: ribbonUp .24s ease-out forwards; }
    .wa-ribbon.hide { animation: ribbonDown .2s ease-in forwards; }

    @keyframes ribbonUp { from { transform: translateX(-50%) translateY(120%); opacity: 0; } to { transform: translateX(-50%) translateY(0); opacity: 1; } }
    @keyframes ribbonDown { from { transform: translateX(-50%) translateY(0); opacity: 1; } to { transform: translateX(-50%) translateY(120%); opacity: 0; } }

    /* ローディングドット */
    .wa-dots { display: inline-flex; gap: 4px; margin-left: 6px; }
    .wa-dots span { width: 6px; height: 6px; border-radius: 50%; background: rgba(255,255,255,.9); animation: dot .9s ease-in-out infinite; }
    .wa-dots span:nth-child(2){ animation-delay: .15s; }
    .wa-dots span:nth-child(3){ animation-delay: .3s; }
    @keyframes dot { 0%,80%,100%{ transform: scale(0.6); opacity: .6;} 40%{ transform: scale(1); opacity: 1;} }

    @media (prefers-reduced-motion: reduce) {
      .wa-ribbon.show, .wa-ribbon.hide { animation: fade .16s linear forwards; }
      @keyframes fade { from { opacity: 0; } to { opacity: 1; } }
      .wa-dots span { animation: none; opacity: .9; }
    }

    /* デモUI */
    .demo-grid { display: grid; gap: 12px; max-width: 720px; }
    .demo-grid button { justify-self: start; }
  </style>
</head>
<body>
  <main class="washi-container wa-fade-in">
    <header class="wa-header">
      <h1 class="wa-title">通知デモB - 帯リボン（下部センター）</h1>
      <p class="wa-subtitle">画面下部に一時的に現れる帯リボン。数秒で自動的に消えます。</p>
      <div class="wa-divider"></div>
    </header>

    <section class="demo-grid">
      <button class="wa-btn wa-btn-primary" onclick="demoProceed()">Ownerがモード選択へ進む（デモ）</button>
      <button class="wa-btn wa-btn-secondary" onclick="demoLearning()">学習モードを開始（デモ）</button>
      <button class="wa-btn wa-btn-outline" onclick="demoCategory()">カテゴリ『ネットワーク』へ表示切替（デモ）</button>
    </section>
  </main>

  <script>
    function showRibbon(message, seconds = 2, icon = '🎌') {
      document.querySelectorAll('.wa-ribbon').forEach(el => el.remove());
      const el = document.createElement('div');
      el.className = 'wa-ribbon show';
      el.setAttribute('role', 'status');
      el.setAttribute('aria-live', 'polite');
      el.innerHTML = `
        <div class="wa-icon">${icon}</div>
        <div class="wa-text">${message} <span class="wa-dots"><span></span><span></span><span></span></span></div>
        <div class="wa-count" id="ribbonCount">${seconds}</div>
      `;
      document.body.appendChild(el);

      let remain = seconds;
      const id = setInterval(() => {
        remain -= 1;
        const c = document.getElementById('ribbonCount');
        if (c) c.textContent = remain;
        if (remain <= 0) {
          clearInterval(id);
          el.classList.remove('show');
          el.classList.add('hide');
          setTimeout(() => el.remove(), 220);
        }
      }, 1000);
    }

    // デモ関数
    function demoProceed(){ showRibbon('主催者がモード選択へ進みました。自動で画面を切り替えます。', 2, '✨'); }
    function demoLearning(){ showRibbon('学習モードを開始します。まもなく切り替わります。', 2, '📚'); }
    function demoCategory(){ showRibbon('主催者が「ネットワーク」を表示しました。', 2, '🔗'); }
  </script>
</body>
</html>
