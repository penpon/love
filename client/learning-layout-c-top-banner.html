<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>å­¦ç¿’ã®é–“ - ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆCï¼ˆä¸Šéƒ¨ãƒãƒŠãƒ¼ï¼‰</title>
  <link rel="stylesheet" href="css/taisho.css" />
  <style>
    /* é‡è¤‡æ’é™¤: ä¸Šéƒ¨ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒŠãƒ“æ–‡å­—ã¯éš ã™ï¼ˆã‚¢ã‚¤ã‚³ãƒ³ã®ã¿ï¼‰ */
    .wa-learning-nav .wa-nav-text{ display:none; }

    /* story-selector æ—¢å­˜ãƒ‡ã‚¶ã‚¤ãƒ³è¸è¥² */
    #story-selector .c-nav { display:flex; gap: var(--spacing-sm); flex-wrap: wrap; justify-content: center; margin-bottom: var(--spacing-lg); }
    #story-selector .c-scroll { background: var(--gradient-washi); border:2px solid var(--ai); border-radius: var(--border-radius-large); padding: var(--spacing-xl); position: relative; overflow: hidden; }
    #story-selector .c-scroll::before, #story-selector .c-scroll::after { content:''; position:absolute; left: 0; right: 0; height: 12px; background: repeating-linear-gradient(90deg, rgba(178,45,53,.15) 0 12px, transparent 12px 24px); }
    #story-selector .c-scroll::before { top:0; } #story-selector .c-scroll::after { bottom:0; }
    #story-selector .c-timeline { position: relative; margin: var(--spacing-xl) auto; max-width: 980px; }
    #story-selector .c-timeline::before { content:''; position:absolute; left: 20px; top:0; bottom:0; width: 4px; background: linear-gradient(180deg, var(--enjhi), var(--yamabuki)); border-radius: 2px; }
    #story-selector .c-node{ position:relative; display:grid; grid-template-columns: 60px 1fr; gap: var(--spacing-md); margin-bottom: var(--spacing-xl); align-items: start; }
    #story-selector .c-pin{ width: 18px; height: 18px; border-radius: 50%; background: var(--enjhi); border: 3px solid var(--washi); box-shadow: var(--shadow-soft); position: relative; left: 12px; top: 6px; }
    #story-selector .c-card{ background: var(--gradient-sakura); border:2px solid var(--enjhi); border-radius: var(--border-radius); padding: var(--spacing-lg); box-shadow: var(--shadow-soft); cursor: pointer; transition: transform .2s ease; }
    #story-selector .c-card:hover{ transform: translateY(-3px); }
    #story-selector .c-title{ font-family: var(--font-accent); color: var(--enjhi); font-weight: 800; }
    #story-selector .c-sub{ color: var(--ai); font-size: .95rem; margin-top: 6px; }
    #story-selector .c-meta{ display:flex; gap:6px; flex-wrap:wrap; margin-top: 8px; }
    #story-selector .c-chip{ background: rgba(22,94,131,.08); color: var(--ai); border:1px solid rgba(22,94,131,.2); border-radius: 999px; padding: 2px 8px; font-size: .8rem; }
    #story-selector .c-hidden{ display:none; }

    /* Cæ¡ˆ: ä¸Šéƒ¨ãƒ•ãƒ«å¹…ãƒãƒŠãƒ¼ã€‚ã‚«ãƒ†ã‚´ãƒªåã¯ã“ã®1ç®‡æ‰€ã®ã¿ */
    .top-banner{ position: sticky; top: 0; z-index: 2; margin: -24px -24px var(--spacing-md); padding: 10px 16px; background: linear-gradient(90deg, rgba(178,45,53,.08), rgba(22,94,131,.08)); border-bottom: 1px dashed var(--enjhi); text-align: center; box-shadow: 0 2px 10px rgba(0,0,0,.05); }
    .top-banner .only-category{ font-family: var(--font-accent); color: var(--enjhi); font-size: 1.1rem; font-weight: 800; }

    /* c-nav ã¯ã‚¢ã‚¤ã‚³ãƒ³ã®ã¿ */
    #story-selector .c-nav .wa-nav-item .txt{ display:none; }
  </style>
</head>
<body>
  <main class="washi-container wa-fade-in">
    <header class="wa-header">
      <h1 class="wa-title">å­¦ç¿’ã®é–“</h1>
      <p class="wa-subtitle">CSé›…å­¦ã®é–“ - å¤§æ­£ãƒ­ãƒãƒ³ã§å­¦ã¶ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ã‚µã‚¤ã‚¨ãƒ³ã‚¹</p>
      <div class="wa-divider"></div>
    </header>

    <nav class="wa-learning-nav">
      <div class="wa-nav-item active" data-category="numbers" aria-label="æ•°å€¤ãƒ»ãƒ‡ãƒ¼ã‚¿"><span class="wa-nav-icon">ğŸ”¢</span><span class="wa-nav-text">æ•°å€¤ãƒ»ãƒ‡ãƒ¼ã‚¿</span></div>
      <div class="wa-nav-item" data-category="hardware" aria-label="ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢"><span class="wa-nav-icon">ğŸ’¾</span><span class="wa-nav-text">ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢</span></div>
      <div class="wa-nav-item" data-category="algorithms" aria-label="ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ "><span class="wa-nav-icon">ğŸ”„</span><span class="wa-nav-text">ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ </span></div>
      <div class="wa-nav-item" data-category="web" aria-label="Web æŠ€è¡“"><span class="wa-nav-icon">ğŸŒ</span><span class="wa-nav-text">WebæŠ€è¡“</span></div>
      <div class="wa-nav-item" data-category="network" aria-label="ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯"><span class="wa-nav-icon">ğŸ”—</span><span class="wa-nav-text">ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯</span></div>
      <div class="wa-nav-item" data-category="security" aria-label="ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£"><span class="wa-nav-icon">ğŸ”</span><span class="wa-nav-text">ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£</span></div>
    </nav>

    <section id="story-selector" class="wa-fade-in" aria-label="ç‰©èªé¸æŠ">
      <div class="c-nav" id="catTabs">
        <div class="wa-nav-item active" data-cat="numbers" aria-label="æ•°å€¤ãƒ»ãƒ‡ãƒ¼ã‚¿">ğŸ”¢ <span class="txt">æ•°å€¤ãƒ»ãƒ‡ãƒ¼ã‚¿</span></div>
        <div class="wa-nav-item" data-cat="hardware" aria-label="ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢">ğŸ’¾ <span class="txt">ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢</span></div>
        <div class="wa-nav-item" data-cat="algorithms" aria-label="ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ">ğŸ”„ <span class="txt">ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ </span></div>
        <div class="wa-nav-item" data-cat="web" aria-label="Web æŠ€è¡“">ğŸŒ <span class="txt">Web</span></div>
        <div class="wa-nav-item" data-cat="network" aria-label="ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯">ğŸ”— <span class="txt">ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯</span></div>
        <div class="wa-nav-item" data-cat="security" aria-label="ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£">ğŸ” <span class="txt">ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£</span></div>
      </div>

      <div class="c-scroll">
        <!-- ã‚«ãƒ†ã‚´ãƒªåã¯ã“ã“ã ã‘ï¼ˆä¸Šéƒ¨ãƒãƒŠãƒ¼ï¼‰ -->
        <div class="top-banner"><div id="onlyCategory" class="only-category">ğŸ”¢ æ•°å€¤ãƒ»ãƒ‡ãƒ¼ã‚¿</div></div>

        <div id="tl-numbers" class="c-timeline"></div>
        <div id="tl-hardware" class="c-timeline c-hidden"></div>
        <div id="tl-algorithms" class="c-timeline c-hidden"></div>
        <div id="tl-web" class="c-timeline c-hidden"></div>
        <div id="tl-network" class="c-timeline c-hidden"></div>
        <div id="tl-security" class="c-timeline c-hidden"></div>
      </div>

      <script>
        const TL_DATA_FALLBACK = {
          hardware: ['æ©Ÿæ¢°å¼è¨ˆç®—æ©Ÿã®æ‹','çœŸç©ºç®¡ã®ç¯ã‚Š','ãƒˆãƒ©ãƒ³ã‚¸ã‚¹ã‚¿ã®é¼“å‹•'],
          algorithms: ['æ¢ç´¢ã¯å›ã‚’æ¢ã—ã¦','ã‚½ãƒ¼ãƒˆã®ãƒ€ãƒ³ã‚¹','å‹•çš„è¨ˆç”»ã®æ‰‹ç´™'],
          web: ['HTMLã®æ‹æ–‡','CSSã®å½©ã‚Š','JavaScriptã®å‘Šç™½'],
          network: ['TCPã®æ¡æ‰‹','DNSã®åä»˜ã‘','ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã®æ—…'],
          security: ['æš—å·ã®æŒ‡è¼ª','å…¬é–‹éµã®ç´„æŸ','ãƒãƒƒã‚·ãƒ¥ã®å°å°']
        };
        const STORIES = { numbers:null, hardware:null, algorithms:null, web:null, network:null, security:null };

        function renderTimeline(rootId, items, catKey){
          const root = document.getElementById(rootId);
          if(!root) return;
          root.innerHTML = '';
          items.forEach(it=>{
            const node = document.createElement('div');
            node.className = 'c-node';
            node.innerHTML = `
              <div class='c-pin'></div>
              <div class='c-card wa-pulse' data-story-title="${it.title}" data-cat="${catKey}" data-ep="${it.ep}">
                <div class='c-title'>${it.icon ? `<span style="margin-right:6px;">${it.icon}</span>` : ''}${it.title}</div>
                <div class='c-sub'>${it.summary || 'çŸ­ã„ã‚ã‚‰ã™ã˜ãŒã“ã“ã«å…¥ã‚Šã¾ã™ã€‚'}</div>
                <div class='c-meta'>
                  <span class='c-chip'>ç¬¬${it.ep}è©±</span>
                  <span class='c-chip'>å­¦ç¿’ 5ã€œ8åˆ†</span>
                </div>
              </div>`;
            root.appendChild(node);
          });
        }

        async function loadNumbers(){
          try{
            const res = await fetch('/data/stories/01_numbers.json');
            if(!res.ok) throw new Error('not found');
            const json = await res.json();
            STORIES.numbers = json;
            const items = (json.chapters||[]).map(ch=>({ ep: ch.id, title: `ç¬¬${ch.id}ç« ï¼š${ch.title}`, icon: ch.icon||'', summary: ch.summary||'' }));
            renderTimeline('tl-numbers', items, 'numbers');
          }catch(e){
            const items = [
              { ep:1, title:'ç¬¬ä¸€ç« ï¼šäºŒé€²æ³•ã®æ‹æ–‡'},
              { ep:2, title:'ç¬¬äºŒç« ï¼šãƒ‡ãƒ¼ã‚¿å‹ã®æ‹æ„›é–¢ä¿‚'},
              { ep:3, title:'ç¬¬ä¸‰ç« ï¼šé€²æ•°å¤‰æ›ã®æ„›'}
            ];
            renderTimeline('tl-numbers', items, 'numbers');
          }
        }

        async function loadCategory(cat, path){
          try{
            const res = await fetch(path); if(!res.ok) throw new Error('404');
            const json = await res.json(); STORIES[cat]=json;
            const items = (json.chapters||[]).map(ch=>({ ep: ch.id, title:`ç¬¬${ch.id}ç« ï¼š${ch.title}`, icon: ch.icon||'', summary: ch.summary||'' }));
            renderTimeline('tl-'+cat, items, cat);
          }catch(e){
            const items = (TL_DATA_FALLBACK[cat]||[]).map((t,i)=>({ ep:i+1, title:t }));
            renderTimeline('tl-'+cat, items, cat);
          }
        }

        const LABELS = {
          numbers: 'ğŸ”¢ æ•°å€¤ãƒ»ãƒ‡ãƒ¼ã‚¿',
          hardware: 'ğŸ’¾ ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢',
          algorithms: 'ğŸ”„ ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ',
          web: 'ğŸŒ WebæŠ€è¡“',
          network: 'ğŸ”— ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯',
          security: 'ğŸ” ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£'
        };

        function switchCategory(key){
          document.querySelectorAll('#story-selector .c-nav .wa-nav-item').forEach(b=>b.classList.remove('active'));
          const tab = document.querySelector(`#story-selector .c-nav .wa-nav-item[data-cat="${key}"]`);
          if(tab) tab.classList.add('active');
          document.querySelectorAll('#story-selector .c-timeline').forEach(el=>el.classList.add('c-hidden'));
          const tl = document.getElementById('tl-'+key); if(tl) tl.classList.remove('c-hidden');
          document.getElementById('onlyCategory').textContent = LABELS[key] || '';
        }

        document.getElementById('catTabs').addEventListener('click', (e)=>{
          const tab = e.target.closest('.wa-nav-item'); if(!tab) return;
          switchCategory(tab.dataset.cat);
        });

        (async function init(){
          await Promise.all([
            loadNumbers(),
            loadCategory('hardware','/data/stories/02_hardware.json'),
            loadCategory('algorithms','/data/stories/03_algorithms.json'),
            loadCategory('web','/data/stories/04_web.json'),
            loadCategory('network','/data/stories/05_network.json'),
            loadCategory('security','/data/stories/06_security.json')
          ]);
          switchCategory('numbers');
        })();
      </script>
    </section>
  </main>
</body>
</html>
