<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSå­¦ç¿’ã‚¯ã‚¤ã‚ºãƒãƒˆãƒ« - å¤§æ­£ãƒ­ãƒãƒ³ã§å­¦ã¶ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ã‚µã‚¤ã‚¨ãƒ³ã‚¹</title>
    <link rel="stylesheet" href="css/taisho.css">
</head>
<body>
    <!-- å››å­£ã®è£…é£¾è¦ç´  -->
    <div class="seasonal-decoration" id="seasonalDecoration"></div>

    <main class="washi-container wa-fade-in">
        <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
        <header class="wa-header">
            <h1 class="wa-title">CSå­¦ç¿’ã‚¯ã‚¤ã‚ºãƒãƒˆãƒ«</h1>
            <p class="wa-subtitle">å¤§æ­£ãƒ­ãƒãƒ³ã§å­¦ã¶ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ã‚µã‚¤ã‚¨ãƒ³ã‚¹</p>
            <div class="wa-divider"></div>
            <p class="wa-description">
                æ‹æ„›ç‰©èªã§CSã®åŸºç¤ã‚’å­¦ã³ã€<br>
                è¯éº—ãªã‚‹å¯¾æˆ¦ã‚¯ã‚¤ã‚ºã§çŸ¥è­˜ã‚’æ·±ã‚ã‚‹é›…ãªå­¦ç¿’ä½“é¨“
            </p>
        </header>

        <!-- å½¹å‰²é¸æŠ -->
        <section class="wa-role-selection">
            <h2 class="wa-section-title">ğŸ­ å‚åŠ æ–¹æ³•ã‚’ãŠé¸ã³ãã ã•ã„</h2>
            
            <div class="wa-mode-selection">
                <!-- Owner (ä¸»å‚¬è€…) -->
                <div class="wa-mode-card" onclick="selectRoleAndProceed('owner')" data-role="owner">
                    <div class="wa-mode-icon">ğŸ‘‘</div>
                    <h3 class="wa-mode-title">ä¸»å‚¬è€… (Owner)</h3>
                    <div class="wa-mode-description">
                        æ–°ã—ã„ãƒ«ãƒ¼ãƒ ã‚’ä½œæˆã—ã€<br>
                        å­¦ç¿’ã®é€²è¡Œã‚’ä¸»å°ã—ã¾ã™
                    </div>
                </div>

                <!-- Guest (å‚åŠ è€…) -->
                <div class="wa-mode-card" onclick="selectRoleAndProceed('guest')" data-role="guest">
                    <div class="wa-mode-icon">ğŸ‹</div>
                    <h3 class="wa-mode-title">å‚åŠ è€… (Guest)</h3>
                    <div class="wa-mode-description">
                        æ—¢å­˜ã®ãƒ«ãƒ¼ãƒ ã«å‚åŠ ã—ã€<br>
                        ä¸»å‚¬è€…ã¨å…±ã«å­¦ç¿’ã—ã¾ã™
                    </div>
                </div>
            </div>
            
            <!-- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤º -->
            <div class="wa-status" style="margin-top: 32px;">
                <div class="wa-status-item">
                    <div class="wa-status-dot"></div>
                    <span id="statusText">å½¹å‰²ã‚’é¸æŠã—ã¦ãã ã•ã„</span>
                </div>
            </div>
        </section>
    </main>

    <script>
        let selectedRole = '';
        
        // å››å­£ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š
        const seasons = ['spring', 'summer', 'autumn', 'winter'];
        const seasonNames = ['æ˜¥', 'å¤', 'ç§‹', 'å†¬'];
        let currentSeasonIndex = 0;
        
        // å­£ç¯€åˆ‡ã‚Šæ›¿ãˆï¼ˆè‡ªå‹•ã®ã¿ï¼‰
        function changeSeason() {
            const seasonElement = document.getElementById('seasonalDecoration');
            
            currentSeasonIndex = (currentSeasonIndex + 1) % seasons.length;
            const season = seasons[currentSeasonIndex];
            
            seasonElement.className = `seasonal-decoration season-${season}`;
            
            // å­£ç¯€ã«å¿œã˜ãŸè£…é£¾è¦ç´ ã‚’ç”Ÿæˆ
            generateSeasonalElements(season);
        }
        
        // å­£ç¯€è£…é£¾è¦ç´ ã®ç”Ÿæˆ
        function generateSeasonalElements(season) {
            const container = document.getElementById('seasonalDecoration');
            container.innerHTML = ''; // æ—¢å­˜è¦ç´ ã‚’ã‚¯ãƒªã‚¢
            
            const elementCount = 8;
            
            for (let i = 0; i < elementCount; i++) {
                const element = document.createElement('div');
                
                switch (season) {
                    case 'spring':
                        element.className = 'sakura-petal';
                        element.style.left = Math.random() * 100 + '%';
                        element.style.animationDelay = Math.random() * 8 + 's';
                        element.style.animationDuration = (6 + Math.random() * 4) + 's';
                        break;
                        
                    case 'summer':
                        element.className = 'summer-leaf';
                        element.style.cssText = `
                            position: absolute;
                            width: 10px;
                            height: 10px;
                            background: var(--tsuyu);
                            border-radius: 50% 0 50% 0;
                            left: ${Math.random() * 100}%;
                            animation: summerSway ${4 + Math.random() * 3}s ease-in-out infinite;
                            animation-delay: ${Math.random() * 4}s;
                            opacity: 0.4;
                        `;
                        break;
                        
                    case 'autumn':
                        element.className = 'momiji-leaf';
                        element.style.left = Math.random() * 100 + '%';
                        element.style.animationDelay = Math.random() * 10 + 's';
                        element.style.animationDuration = (8 + Math.random() * 4) + 's';
                        break;
                        
                    case 'winter':
                        element.className = 'snow-flake';
                        element.innerHTML = 'â„';
                        element.style.cssText = `
                            position: absolute;
                            color: var(--yuki);
                            font-size: ${8 + Math.random() * 8}px;
                            left: ${Math.random() * 100}%;
                            animation: snowFall ${6 + Math.random() * 6}s linear infinite;
                            animation-delay: ${Math.random() * 6}s;
                            opacity: 0.8;
                        `;
                        break;
                }
                
                container.appendChild(element);
            }
        }
        
        // CSS ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®šç¾©ã‚’å‹•çš„ã«è¿½åŠ 
        const style = document.createElement('style');
        style.textContent = `
            @keyframes summerSway {
                0%, 100% { transform: translateX(0) rotate(0deg); }
                25% { transform: translateX(10px) rotate(90deg); }
                75% { transform: translateX(-10px) rotate(270deg); }
            }
            
            @keyframes snowFall {
                0% {
                    transform: translateY(-100px) rotate(0deg);
                    opacity: 0;
                }
                10% {
                    opacity: 0.8;
                }
                90% {
                    opacity: 0.8;
                }
                100% {
                    transform: translateY(100vh) rotate(360deg);
                    opacity: 0;
                }
            }
        `;
        document.head.appendChild(style);
        
        // å½¹å‰²é¸æŠã¨ç›´æ¥é·ç§»
        function selectRoleAndProceed(role) {
            selectedRole = role;
            
            // é¸æŠæ™‚ã®ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
            document.querySelectorAll('.wa-mode-card').forEach(card => {
                card.classList.remove('selected');
            });
            document.querySelector(`[data-role="${role}"]`).classList.add('selected');
            
            // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°
            const statusText = document.getElementById('statusText');
            if (role === 'owner') {
                statusText.textContent = 'ä¸»å‚¬è€…ã¨ã—ã¦é¸æŠæ¸ˆã¿ - ãƒ­ãƒ“ãƒ¼ã¸éµç§»ä¸­...';
            } else if (role === 'guest') {
                statusText.textContent = 'å‚åŠ è€…ã¨ã—ã¦é¸æŠæ¸ˆã¿ - ãƒ­ãƒ“ãƒ¼ã¸éµç§»ä¸­...';
            }
            statusText.style.color = 'var(--yuki)';
            
            // å°‘ã—é…å»¶ã—ã¦ã‹ã‚‰é·ç§»ï¼ˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®ãŸã‚ï¼‰
            setTimeout(() => {
                proceedToLobby();
            }, 800);
        }
        
        // æ—§é–¢æ•°ã¯äº’æ›æ€§ã®ãŸã‚ã«æ®‹ã—ã¦ãŠã
        function selectRole(role) {
            selectRoleAndProceed(role);
        }
        
        // ãƒ­ãƒ“ãƒ¼ã¸é€²ã‚€
        function proceedToLobby() {
            if (!selectedRole) {
                alert('ã¾ãšå½¹å‰²ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚');
                return;
            }
            
            // ãƒ­ãƒ“ãƒ¼ç”»é¢ã«é·ç§»
            window.location.href = `lobby.html?role=${selectedRole}`;
        }
        
        // ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ
        document.addEventListener('keydown', (e) => {
            switch (e.key) {
                case '1':
                    selectRoleAndProceed('owner');
                    break;
                case '2':
                    selectRoleAndProceed('guest');
                    break;
            }
        });
        
        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', () => {
            // åˆæœŸå­£ç¯€è£…é£¾
            generateSeasonalElements('spring');
            
            // å®šæœŸçš„ãªå­£ç¯€å¤‰æ›´ (30ç§’ã”ã¨)
            setInterval(changeSeason, 30000);
            
            // ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£: å‹•ä½œè»½æ¸›è¨­å®šã®å ´åˆã¯ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’åœæ­¢
            if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.getElementById('seasonalDecoration').style.display = 'none';
            }
        });
        
        // ãƒšãƒ¼ã‚¸ã‚¿ã‚¤ãƒˆãƒ«ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
        let titleIndex = 0;
        const titleVariations = [
            'CSå­¦ç¿’ã‚¯ã‚¤ã‚ºãƒãƒˆãƒ« - å¤§æ­£ãƒ­ãƒãƒ³ã§å­¦ã¶ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ã‚µã‚¤ã‚¨ãƒ³ã‚¹',
            'ğŸŒ¸ CSå­¦ç¿’ã‚¯ã‚¤ã‚ºãƒãƒˆãƒ« - é›…ãªå­¦ã³ã®ä¸–ç•Œã¸',
            'âš”ï¸ CSå­¦ç¿’ã‚¯ã‚¤ã‚ºãƒãƒˆãƒ« - çŸ¥è­˜ã®è¯éº—ãªã‚‹å¯¾æˆ¦',
            'ğŸ›ï¸ CSå­¦ç¿’ã‚¯ã‚¤ã‚ºãƒãƒˆãƒ« - å¤§æ­£æµªæ¼«ã¨æŠ€è¡“ã®èåˆ'
        ];
        
        setInterval(() => {
            titleIndex = (titleIndex + 1) % titleVariations.length;
            document.title = titleVariations[titleIndex];
        }, 5000);
    </script>
</body>
</html>
